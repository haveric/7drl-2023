(self.webpackChunk_7drl_2023=self.webpackChunk_7drl_2023||[]).push([[143],{890:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s(7537),o=s.n(n),i=s(3645),a=s.n(i)()(o());a.push([e.id,'* {\n    box-sizing: border-box;\n}\n\nbody {\n    margin: 0 auto;\n    overflow: hidden;\n    width: 100vw;\n    height: 100vh;\n    font-size: 1.2vh;\n}\n\n.ui {\n    display: block;\n    z-index: -1000 !important;\n    opacity: 0;\n    pointer-events: none;\n}\n\n.ui.active {\n    z-index: 0 !important;\n    opacity: 1;\n    pointer-events: all;\n}\n\n\n.details {\n    padding: 10px 15px;\n    font-size: 2vh;\n    display: block;\n    width: 20%;\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #ddd;\n}\n\n.details__header {\n    margin-top: 20px;\n}\n\n.details__line {\n    display: block;\n}\n\n.player-info {\n    height: calc(20vh - 10px);\n    border-bottom: 1px solid #000;\n}\n\n.view-info {\n    height: 30vh;\n    border-bottom: 1px solid #000;\n}\n\n.message-console {\n    position: relative;\n    height: calc(50vh - 10px);\n}\n\n.messages__wrap {\n    position: absolute;\n    opacity: 1;\n    padding: 15px 5px 5px;\n    width: 100%;\n    height: 100%;\n}\n\n.messages {\n    display:flex;\n    flex-direction:column-reverse;\n    height: 100%;\n    overflow-y: scroll;\n}\n\n\n.messages__inn {\n\n}\n\n.message {\n    font-size: 1.66vh;\n}\n\n.message__text {\n\n}\n\n.message__bold {\n    font-weight: bold;\n}\n\n.message__italics {\n    font-style: italic;\n}\n\n.message__amount {\n    margin-left: 1em;\n}\n\n\n.player-health,\n.hero-health {\n    position: relative;\n    width: 100%;\n    height: 2vh;\n    background-color: #000;\n}\n\n.player-health__fg,\n.hero-health__fg {\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    background-color: #8B0000;\n}\n\n.player-health__text,\n.hero-health__text {\n    display: table;\n    position: absolute;\n    left: 0;\n    right: 0;\n    font-size: 1.8vh;\n    color: #fff;\n    margin: 0 auto;\n}\n\n.player-stat,\n.hero-stat {\n    display: inline-block;\n    float: left;\n    width: 50%;\n}\n\n.hero-info {\n    display: inline-block;\n    position: absolute;\n    left: 25.5%;\n    width: 24.5%;\n    padding: 15px;\n    font-size: 2vh;\n}\n\n.hero-status__message {\n    font-size: 2.5vh;\n}\n\n.inventory {\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 30%;\n    height: 80%;\n    transform: translateX(100%);\n    transition: transform 1s ease;\n    background: #fff;\n    padding: 15px;\n}\n\n.inventory.active {\n    transform: translateX(0);\n}\n\n.inventory__equipment {\n    width: 100%;\n    height: 55%;\n    display: grid;\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n    grid-template-rows: repeat(4, minmax(0, 1fr));\n    background-color: #333;\n    grid-gap: 0.2vw;\n    padding: 1vh 7.5vh\n}\n\n.inventory__storage-wrap {\n    width: 100%;\n    height: 40%;\n    background-color: #333;\n    position: relative;\n    overflow-y: auto;\n}\n\n.inventory__storage {\n    width: 100%;\n    display: grid;\n    grid-template-columns: repeat(10, minmax(0, 1fr));\n    grid-gap: 0.2vw;\n    padding: 0.2vw;\n}\n\n.inventory__storage-title {\n    grid-column: span 10;\n    padding: 5px;\n    background-color: #ccc;\n    font-size: 1.8vh;\n}\n\n.slot {\n    background-color: gray;\n    text-align: center;\n    border-radius: 5px;\n    position: relative;\n    font-family: helvetica, serif;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.inventory__equipment-slot .item {\n    font-size: 7.5vh;\n}\n\n.inventory__equipment-slot:before {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    height: 100%;\n    font-size: 7.5vh;\n    opacity: 0.15;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.inventory__equipment-slot.has-item:before {\n    display: none;\n}\n\n.inventory__equipment-slot[data-index="0"]:before {\n    content: "⌈";\n}\n\n.inventory__equipment-slot[data-index="1"]:before {\n    content: "∩";\n}\n\n.inventory__equipment-slot[data-index="2"]:before {\n    content: "ᴕ";\n}\n\n.inventory__equipment-slot[data-index="3"]:before {\n    content: "†";\n    transform: rotate(180deg);\n}\n\n.inventory__equipment-slot[data-index="4"]:before {\n    content: "☗";\n}\n\n.inventory__equipment-slot[data-index="5"]:before {\n    content: "●";\n}\n\n.inventory__equipment-slot[data-index="6"]:before,\n.inventory__equipment-slot[data-index="8"]:before {\n    content: "○";\n}\n\n.inventory__equipment-slot[data-index="7"]:before {\n    content: "-";\n}\n\n.inventory__equipment-slot[data-index="9"]:before {\n    content: "ひ";\n}\n\n.inventory__equipment-slot[data-index="10"]:before {\n    content: "◫";\n}\n.inventory__equipment-slot[data-index="11"]:before {\n    content: "″";\n}\n\n.inventory__storage-slot {\n    height: 5.3vh;\n}\n\n.slot.has-item:hover {\n    cursor: pointer;\n    background-color: #999;\n}\n\n.slot.disabled {\n    background-color: #845b5b;\n}\n\n.slot.dragging .item {\n    display: none;\n}\n\n.select-list,\n.trade-list {\n    background-color: #ccc;\n    border-radius: 5px;\n    padding: 15px;\n    position: absolute;\n    top: 0;\n    left: 0;\n    font-size: 1.5vh;\n}\n\n.select-list__title,\n.trade-list__title {\n    margin: 0;\n    padding-bottom: 5px;\n    border-bottom: 1px solid #666;\n    font-size: 2.5vh;\n}\n\n.select-list__option::marker,\n.trade-list__option::marker {\n    color: #000;\n}\n.select-list__option.active,\n.trade-list__option.active{\n    background-color: #1E90FF;\n    color: #fff;\n}\n\n.trade-list__option {\n    border: 1px dashed #666;\n    padding: 5px 10px;\n}\n\n.trade-list__left {\n    width: 50%;\n    float: left;\n    border-right: 1px solid #000;\n}\n\n.trade-list__right {\n    width: 50%;\n    float: left;\n\n}',"",{version:3,sources:["webpack://./src/styles/style.css"],names:[],mappings:"AAAA;IACI,sBAAsB;AAC1B;;AAEA;IACI,cAAc;IACd,gBAAgB;IAChB,YAAY;IACZ,aAAa;IACb,gBAAgB;AACpB;;AAEA;IACI,cAAc;IACd,yBAAyB;IACzB,UAAU;IACV,oBAAoB;AACxB;;AAEA;IACI,qBAAqB;IACrB,UAAU;IACV,mBAAmB;AACvB;;;AAGA;IACI,kBAAkB;IAClB,cAAc;IACd,cAAc;IACd,UAAU;IACV,kBAAkB;IAClB,MAAM;IACN,QAAQ;IACR,SAAS;IACT,sBAAsB;AAC1B;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,cAAc;AAClB;;AAEA;IACI,yBAAyB;IACzB,6BAA6B;AACjC;;AAEA;IACI,YAAY;IACZ,6BAA6B;AACjC;;AAEA;IACI,kBAAkB;IAClB,yBAAyB;AAC7B;;AAEA;IACI,kBAAkB;IAClB,UAAU;IACV,qBAAqB;IACrB,WAAW;IACX,YAAY;AAChB;;AAEA;IACI,YAAY;IACZ,6BAA6B;IAC7B,YAAY;IACZ,kBAAkB;AACtB;;;AAGA;;AAEA;;AAEA;IACI,iBAAiB;AACrB;;AAEA;;AAEA;;AAEA;IACI,iBAAiB;AACrB;;AAEA;IACI,kBAAkB;AACtB;;AAEA;IACI,gBAAgB;AACpB;;;AAGA;;IAEI,kBAAkB;IAClB,WAAW;IACX,WAAW;IACX,sBAAsB;AAC1B;;AAEA;;IAEI,kBAAkB;IAClB,MAAM;IACN,OAAO;IACP,SAAS;IACT,yBAAyB;AAC7B;;AAEA;;IAEI,cAAc;IACd,kBAAkB;IAClB,OAAO;IACP,QAAQ;IACR,gBAAgB;IAChB,WAAW;IACX,cAAc;AAClB;;AAEA;;IAEI,qBAAqB;IACrB,WAAW;IACX,UAAU;AACd;;AAEA;IACI,qBAAqB;IACrB,kBAAkB;IAClB,WAAW;IACX,YAAY;IACZ,aAAa;IACb,cAAc;AAClB;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,kBAAkB;IAClB,MAAM;IACN,QAAQ;IACR,UAAU;IACV,WAAW;IACX,2BAA2B;IAC3B,6BAA6B;IAC7B,gBAAgB;IAChB,aAAa;AACjB;;AAEA;IACI,wBAAwB;AAC5B;;AAEA;IACI,WAAW;IACX,WAAW;IACX,aAAa;IACb,gDAAgD;IAChD,6CAA6C;IAC7C,sBAAsB;IACtB,eAAe;IACf;AACJ;;AAEA;IACI,WAAW;IACX,WAAW;IACX,sBAAsB;IACtB,kBAAkB;IAClB,gBAAgB;AACpB;;AAEA;IACI,WAAW;IACX,aAAa;IACb,iDAAiD;IACjD,eAAe;IACf,cAAc;AAClB;;AAEA;IACI,oBAAoB;IACpB,YAAY;IACZ,sBAAsB;IACtB,gBAAgB;AACpB;;AAEA;IACI,sBAAsB;IACtB,kBAAkB;IAClB,kBAAkB;IAClB,kBAAkB;IAClB,6BAA6B;IAC7B,aAAa;IACb,uBAAuB;IACvB,mBAAmB;AACvB;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,kBAAkB;IAClB,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,WAAW;IACX,YAAY;IACZ,gBAAgB;IAChB,aAAa;IACb,aAAa;IACb,uBAAuB;IACvB,mBAAmB;AACvB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,YAAY;IACZ,yBAAyB;AAC7B;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,YAAY;AAChB;;AAEA;;IAEI,YAAY;AAChB;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,YAAY;AAChB;;AAEA;IACI,YAAY;AAChB;AACA;IACI,YAAY;AAChB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,eAAe;IACf,sBAAsB;AAC1B;;AAEA;IACI,yBAAyB;AAC7B;;AAEA;IACI,aAAa;AACjB;;AAEA;;IAEI,sBAAsB;IACtB,kBAAkB;IAClB,aAAa;IACb,kBAAkB;IAClB,MAAM;IACN,OAAO;IACP,gBAAgB;AACpB;;AAEA;;IAEI,SAAS;IACT,mBAAmB;IACnB,6BAA6B;IAC7B,gBAAgB;AACpB;;AAEA;;IAEI,WAAW;AACf;AACA;;IAEI,yBAAyB;IACzB,WAAW;AACf;;AAEA;IACI,uBAAuB;IACvB,iBAAiB;AACrB;;AAEA;IACI,UAAU;IACV,WAAW;IACX,4BAA4B;AAChC;;AAEA;IACI,UAAU;IACV,WAAW;;AAEf",sourcesContent:['* {\n    box-sizing: border-box;\n}\n\nbody {\n    margin: 0 auto;\n    overflow: hidden;\n    width: 100vw;\n    height: 100vh;\n    font-size: 1.2vh;\n}\n\n.ui {\n    display: block;\n    z-index: -1000 !important;\n    opacity: 0;\n    pointer-events: none;\n}\n\n.ui.active {\n    z-index: 0 !important;\n    opacity: 1;\n    pointer-events: all;\n}\n\n\n.details {\n    padding: 10px 15px;\n    font-size: 2vh;\n    display: block;\n    width: 20%;\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    background-color: #ddd;\n}\n\n.details__header {\n    margin-top: 20px;\n}\n\n.details__line {\n    display: block;\n}\n\n.player-info {\n    height: calc(20vh - 10px);\n    border-bottom: 1px solid #000;\n}\n\n.view-info {\n    height: 30vh;\n    border-bottom: 1px solid #000;\n}\n\n.message-console {\n    position: relative;\n    height: calc(50vh - 10px);\n}\n\n.messages__wrap {\n    position: absolute;\n    opacity: 1;\n    padding: 15px 5px 5px;\n    width: 100%;\n    height: 100%;\n}\n\n.messages {\n    display:flex;\n    flex-direction:column-reverse;\n    height: 100%;\n    overflow-y: scroll;\n}\n\n\n.messages__inn {\n\n}\n\n.message {\n    font-size: 1.66vh;\n}\n\n.message__text {\n\n}\n\n.message__bold {\n    font-weight: bold;\n}\n\n.message__italics {\n    font-style: italic;\n}\n\n.message__amount {\n    margin-left: 1em;\n}\n\n\n.player-health,\n.hero-health {\n    position: relative;\n    width: 100%;\n    height: 2vh;\n    background-color: #000;\n}\n\n.player-health__fg,\n.hero-health__fg {\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    background-color: #8B0000;\n}\n\n.player-health__text,\n.hero-health__text {\n    display: table;\n    position: absolute;\n    left: 0;\n    right: 0;\n    font-size: 1.8vh;\n    color: #fff;\n    margin: 0 auto;\n}\n\n.player-stat,\n.hero-stat {\n    display: inline-block;\n    float: left;\n    width: 50%;\n}\n\n.hero-info {\n    display: inline-block;\n    position: absolute;\n    left: 25.5%;\n    width: 24.5%;\n    padding: 15px;\n    font-size: 2vh;\n}\n\n.hero-status__message {\n    font-size: 2.5vh;\n}\n\n.inventory {\n    position: absolute;\n    top: 0;\n    right: 0;\n    width: 30%;\n    height: 80%;\n    transform: translateX(100%);\n    transition: transform 1s ease;\n    background: #fff;\n    padding: 15px;\n}\n\n.inventory.active {\n    transform: translateX(0);\n}\n\n.inventory__equipment {\n    width: 100%;\n    height: 55%;\n    display: grid;\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n    grid-template-rows: repeat(4, minmax(0, 1fr));\n    background-color: #333;\n    grid-gap: 0.2vw;\n    padding: 1vh 7.5vh\n}\n\n.inventory__storage-wrap {\n    width: 100%;\n    height: 40%;\n    background-color: #333;\n    position: relative;\n    overflow-y: auto;\n}\n\n.inventory__storage {\n    width: 100%;\n    display: grid;\n    grid-template-columns: repeat(10, minmax(0, 1fr));\n    grid-gap: 0.2vw;\n    padding: 0.2vw;\n}\n\n.inventory__storage-title {\n    grid-column: span 10;\n    padding: 5px;\n    background-color: #ccc;\n    font-size: 1.8vh;\n}\n\n.slot {\n    background-color: gray;\n    text-align: center;\n    border-radius: 5px;\n    position: relative;\n    font-family: helvetica, serif;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.inventory__equipment-slot .item {\n    font-size: 7.5vh;\n}\n\n.inventory__equipment-slot:before {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    height: 100%;\n    font-size: 7.5vh;\n    opacity: 0.15;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.inventory__equipment-slot.has-item:before {\n    display: none;\n}\n\n.inventory__equipment-slot[data-index="0"]:before {\n    content: "⌈";\n}\n\n.inventory__equipment-slot[data-index="1"]:before {\n    content: "∩";\n}\n\n.inventory__equipment-slot[data-index="2"]:before {\n    content: "ᴕ";\n}\n\n.inventory__equipment-slot[data-index="3"]:before {\n    content: "†";\n    transform: rotate(180deg);\n}\n\n.inventory__equipment-slot[data-index="4"]:before {\n    content: "☗";\n}\n\n.inventory__equipment-slot[data-index="5"]:before {\n    content: "●";\n}\n\n.inventory__equipment-slot[data-index="6"]:before,\n.inventory__equipment-slot[data-index="8"]:before {\n    content: "○";\n}\n\n.inventory__equipment-slot[data-index="7"]:before {\n    content: "-";\n}\n\n.inventory__equipment-slot[data-index="9"]:before {\n    content: "ひ";\n}\n\n.inventory__equipment-slot[data-index="10"]:before {\n    content: "◫";\n}\n.inventory__equipment-slot[data-index="11"]:before {\n    content: "″";\n}\n\n.inventory__storage-slot {\n    height: 5.3vh;\n}\n\n.slot.has-item:hover {\n    cursor: pointer;\n    background-color: #999;\n}\n\n.slot.disabled {\n    background-color: #845b5b;\n}\n\n.slot.dragging .item {\n    display: none;\n}\n\n.select-list,\n.trade-list {\n    background-color: #ccc;\n    border-radius: 5px;\n    padding: 15px;\n    position: absolute;\n    top: 0;\n    left: 0;\n    font-size: 1.5vh;\n}\n\n.select-list__title,\n.trade-list__title {\n    margin: 0;\n    padding-bottom: 5px;\n    border-bottom: 1px solid #666;\n    font-size: 2.5vh;\n}\n\n.select-list__option::marker,\n.trade-list__option::marker {\n    color: #000;\n}\n.select-list__option.active,\n.trade-list__option.active{\n    background-color: #1E90FF;\n    color: #fff;\n}\n\n.trade-list__option {\n    border: 1px dashed #666;\n    padding: 5px 10px;\n}\n\n.trade-list__left {\n    width: 50%;\n    float: left;\n    border-right: 1px solid #000;\n}\n\n.trade-list__right {\n    width: 50%;\n    float: left;\n\n}'],sourceRoot:""}]);const r=a},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",n=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),n&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),n&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,n,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(n)for(var r=0;r<this.length;r++){var l=this[r][0];null!=l&&(a[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);n&&a[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),s&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=s):d[2]=s),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},7537:e=>{"use strict";e.exports=function(e){var t=e[1],s=e[3];if(!s)return t;if("function"==typeof btoa){var n=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(n),i="/*# ".concat(o," */");return[t].concat([i]).join("\n")}return[t].join("\n")}},3379:e=>{"use strict";var t=[];function s(e){for(var s=-1,n=0;n<t.length;n++)if(t[n].identifier===e){s=n;break}return s}function n(e,n){for(var i={},a=[],r=0;r<e.length;r++){var l=e[r],c=n.base?l[0]+n.base:l[0],d=i[c]||0,h="".concat(c," ").concat(d);i[c]=d+1;var p=s(h),m={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var u=o(m,n);n.byIndex=r,t.splice(r,0,{identifier:h,updater:u,references:1})}a.push(h)}return a}function o(e,t){var s=t.domAPI(t);return s.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,o){var i=n(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var r=s(i[a]);t[r].references--}for(var l=n(e,o),c=0;c<i.length;c++){var d=s(i[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=l}}},569:e=>{"use strict";var t={};e.exports=function(e,s){var n=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(s)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,s)=>{"use strict";e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var n="";s.supports&&(n+="@supports (".concat(s.supports,") {")),s.media&&(n+="@media ".concat(s.media," {"));var o=void 0!==s.layer;o&&(n+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),n+=s.css,o&&(n+="}"),s.media&&(n+="}"),s.supports&&(n+="}");var i=s.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},1814:(e,t,s)=>{"use strict";var n=s(3379),o=s.n(n),i=s(7795),a=s.n(i),r=s(569),l=s.n(r),c=s(3565),d=s.n(c),h=s(9216),p=s.n(h),m=s(4589),u=s.n(m),_=s(890),g={};g.styleTagTransform=u(),g.setAttributes=d(),g.insert=l().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=p(),o()(_.Z,g),_.Z&&_.Z.locals&&_.Z.locals;var f=s(8680),v=s(3918),b=s(6463),y=s(1006),A=s(3872),w=s(8052);class x extends v.Z{constructor(){super()}teardown(){super.teardown()}handleInput(){let e=null;return this.isPlayerTurn&&f.Z.player.isAlive()&&(b.Z.testPressed("up")?e=new y.Z(f.Z.player,0,-1):b.Z.testPressed("down")?e=new y.Z(f.Z.player,0,1):b.Z.testPressed("left")?e=new y.Z(f.Z.player,-1,0):b.Z.testPressed("right")?e=new y.Z(f.Z.player,1,0):b.Z.testPressed("nw")?e=new y.Z(f.Z.player,-1,-1):b.Z.testPressed("ne")?e=new y.Z(f.Z.player,1,-1):b.Z.testPressed("sw")?e=new y.Z(f.Z.player,-1,1):b.Z.testPressed("se")?e=new y.Z(f.Z.player,1,1):b.Z.testPressed("wait")?e=new A.Z(f.Z.player):b.Z.testPressed("confirm")&&(e=new w.Z(f.Z.player))),e}onMouseMove(e){this.mouse.x=e.clientX,this.mouse.y=e.clientY,f.Z.needsRenderUpdate=!0}}var k=s(3432),Z=s(1950),C=s(1470),I=s(1175),B=s(8621),M=s(6297),E=s(4433);class S extends B.Z{constructor(e,t,s={}){const n=s.level||1;super("tutorial-"+n,"Dungeon Entry",e,t),this.maxRooms=s.maxRooms||1,this.roomMinSize=s.roomMinSize||8,this.roomMaxSize=s.roomMaxSize||8,this.level=n,this.minTilesByFloor=[{level:1,amount:3}],this.maxTilesByFloor=[{level:1,amount:3}],this.minMonstersByFloor=[{level:1,amount:2}],this.maxMonstersByFloor=[{level:1,amount:2}],this.minItemsByFloor=[{level:1,amount:2}],this.maxItemsByFloor=[{level:1,amount:2}],this.explored=!0}getFloorAmount(e){let t=0;for(const s of e){if(s.level>this.level)break;t=s.amount}return t}save(){const e=super.save();return 1!==this.level&&(e.level=this.level),this.saveCache=e,e}create(e,t){super.create();const s=Z.Z.createFromTemplate("wall",{components:{position:{x:0,y:0}}});for(let e=0;e<this.height;e++)for(let t=0;t<this.width;t++){const n=s.clone();n.getComponent("position").moveTo(t,e),this.tiles[t][e]=n}const n=[];for(let e=0;e<this.maxRooms;e++){const e=M.Z.randomInt(this.roomMinSize,this.roomMaxSize),s=M.Z.randomInt(this.roomMinSize,this.roomMaxSize),o=new E.Z(1,1,e,s);if(o.createRoom(this),0===n.length){const e=o.getCenterX(),s=o.getCenterY();t&&t.setPosition(e,0),this.tiles[e][0]=Z.Z.createFromTemplate("stairs_up",{components:{position:{x:e,y:0}}});const n=M.Z.randomInt(o.x1+2,o.x2-2),i=M.Z.randomInt(o.y1+2,o.y2-2);this.tiles[n][i]=Z.Z.createFromTemplate("stairs_down",{components:{position:{x:n,y:i},stairsInteractable:{generator:"basic-dungeon"}}});let a=n,r=i;for(;a===n&&r===i;)a=M.Z.randomInt(o.x1+2,o.x2-2),r=M.Z.randomInt(o.y1+2,o.y2-2),a===n&&r===i||(this.tiles[a][r]=Z.Z.createFromTemplate("trap_door",{components:{position:{x:a,y:r},trapDoorInteractable:{generator:"shop"}}}));this.addPlayer(e,s);const l=Z.Z.createFromTemplate("hero");this.addActor(l)}n.push(o)}for(const e of n)e.placeTiles(this,"tutorial",this.level,this.getFloorAmount(this.minTilesByFloor),this.getFloorAmount(this.maxTilesByFloor)),e.placeEntities(this,"tutorial",this.level,this.getFloorAmount(this.minMonstersByFloor),this.getFloorAmount(this.maxMonstersByFloor)),e.placeItems(this,"tutorial",this.level,this.getFloorAmount(this.minItemsByFloor),this.getFloorAmount(this.maxItemsByFloor))}}var T=s(3036),D=s(7692),L=s(959),z=s(7839),O=s(7493),N=s(8953),F=s(842),q=s(7156),P=s(550),j=s(9083);!function(){function e(){f.Z.handleEvents(),P.Z.preloadSprites()&&(f.Z.needsRenderUpdate||C.Z.needsRenderUpdate)&&(C.Z.clearAll(),f.Z.draw(),f.Z.needsRenderUpdate=!1,C.Z.needsRenderUpdate=!1),window.requestAnimationFrame(e)}let t=!1;j.Z.preloadComponents(),function(){const e=s(2904);let n=e.keys().length,o=0;e.keys().forEach((s=>{if(-1!==s.indexOf("_"))return n--,void(o===n&&(t=!0));e(s).then((e=>{const s=e.default;s.constructor.isFrozen?o++:(j.Z.load(new s),o++,o===n&&(t=!0))}))}))}();const n=window.setInterval((()=>{t&&j.Z.componentsLoaded&&C.Z.renderer.componentsLoaded&&Z.Z.isLoaded()&&(clearInterval(n),function(){L.Z.open(),L.Z.appendTo(C.Z.gameDom),z.Z.appendTo(C.Z.gameDom),O.Z.appendTo(C.Z.gameDom),N.Z.open(),I.Z.open(),F.Z.open(),q.Z.open(),N.Z.appendTo(q.Z.dom),I.Z.appendTo(q.Z.dom),F.Z.appendTo(q.Z.dom),q.Z.appendTo(C.Z.gameDom),f.Z.clearMaps(),f.Z.initTextures(),C.Z.resizeCanvas(),f.Z.setHeroMap(new S(11,11)),f.Z.setNextMap(new T.Z(11,11,{level:2})),f.Z.setFutureMap(new T.Z(11,11,{level:3})),f.Z.setShopMap(new D.Z(11,11)),f.Z.player=Z.Z.createFromTemplate("player",{components:{position:{x:0,y:0}}}),f.Z.heroMap.create(),f.Z.nextMap.create(),f.Z.futureMap.create(),f.Z.shopMap.create(),f.Z.playerMap=f.Z.heroMap,f.Z.eventHandler=new x,I.Z.updatePlayerDetails(f.Z.player,f.Z.playerMap),k.Z.text("Welcome to the dungeon.").build(),f.Z.needsRenderUpdate=!0;const t=f.Z.player.getComponent("position");f.Z.heroMap.revealFromPosition(t.x.get(),t.y.get(),20,0),f.Z.player.fov.compute(f.Z.playerMap,t.x.get(),t.y.get(),5),f.Z.player.fov.updateMap(),window.requestAnimationFrame(e)}())}),0)}()},1470:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(9083);class o{constructor(){this.componentsLoaded=!1,this.preloadComponents()}preloadComponents(){const e=s(1734);let t=e.keys().length,o=0;e.keys().forEach((s=>{if(-1!==s.indexOf("_"))return t--,void(o===t&&(this.componentsLoaded=!0));e(s).then((e=>{const s=e.default;s.constructor.isFrozen?o++:(n.Z.load(new s),o++,o===t&&(this.componentsLoaded=!0))}))}))}}const i=new class{constructor(){this.setupGameHtml(),this.scale=1,this.needsRenderUpdate=!1,this.renderer=new o,window.addEventListener("resize",this)}setupGameHtml(){this.gameDom=document.createElement("div"),this.gameDom.classList.add("game"),this.canvas=document.createElement("canvas"),this.canvas.classList.add("view"),this.gameDom.appendChild(this.canvas),document.body.appendChild(this.gameDom),this.ctx=this.canvas.getContext("2d")}handleEvent(e){"resize"===e.type&&this.resizeCanvas()}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight;const e=this.canvas.width/2560,t=this.canvas.height/1440;this.scale=Math.min(e,t),this.needsRenderUpdate=!0}clearAll(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}}},9970:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s(3622);class o extends n.Z{constructor(e){super(e)}perform(e){return this}}},9691:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s(3622);class o extends n.Z{constructor(e,t){super(e),this.reason=t}perform(e){return this}}},3872:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s(3622);class o extends n.Z{constructor(e){super(e)}perform(e){return this}}},3622:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});class n{constructor(e){this.entity=e}perform(e){console.error("Not Implemented")}}},5091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});class n{#e;_name;_defaultValue;_value;constructor(e,t){this._name=e,this._defaultValue=t}setParentComponentOrEntity(e){this.#e=e}getParentComponentOrEntity(){return this.#e}save(e,t){return this._value!==this._defaultValue&&(void 0===t?e[this._name]=this._value:e[t][this._name]=this._value),e}load(e){this._value=e[this._name]??this._defaultValue}get(){return this._value}set(e){this._value=e,this.#e.clearSaveCache()}toString(){return this.get()}}},3070:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(5091),o=s(1950);class i extends n.Z{constructor(e,t){super(e,t??[])}save(e,t){const s=[];if(this._value)for(const e of this._value)e&&s.push(JSON.stringify(e.save()));e[t][this._name]=s}load(e){const t=this._defaultValue,s=e[this._name];if(s)for(const e of s)if(null===e)t.push(e);else{let s;s=e.load?o.Z.createFromTemplate(e.load,e):o.Z.create(e),s.parentEntity=this.getParentComponentOrEntity(),t.push(s)}this._value=t}}},9016:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s(5091);class o extends n.Z{constructor(e,t){super(e,t)}save(e,t){return this._value!==this._defaultValue&&(e[t]=this._value),e}load(e){"boolean"==typeof e?this._value=e:"object"==typeof e&&(this._value=e[this._name]),this._value=this._value??this._defaultValue}}},9083:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n=new class{constructor(){this.types=new Map,this.componentsLoaded=!1}preloadComponents(){const e=s(3708);let t=e.keys().length,o=0;e.keys().forEach((s=>{if(-1!==s.indexOf("_"))return t--,void(o===t&&(this.componentsLoaded=!0));e(s).then((e=>{const s=e.default;s.constructor.isFrozen?o++:(n.load(new s),o++,o===t&&(this.componentsLoaded=!0))}))}))}load(e){this.types.set(e.type,e)}create(e,t,s){return new(0,this.types.get(t).constructor)(s)}},o=n},8926:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});class n{constructor(e={},t,s){this.json=e,this.args=[],this.baseType=t||"component",this.type=s||this.baseType,this.parentEntity=e.parentEntity,this.cachedSave=null}clearSaveCache(){this.cachedSave=null,this.parentEntity?.clearSaveCache()}save(){if(this.cachedSave)return this.cachedSave;const e={};e[this.type]={};for(const t of this.args)t.save(e,this.type);return this.cachedSave=e,e}hasComponent(){return this.json.components&&void 0!==this.json.components[this.type]}getComponent(){return this.json.components[this.type]}addArg(e){return e.setParentComponentOrEntity(this),this.args.push(e),this.hasComponent()&&e.load(this.getComponent()),e}}},5447:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var n=s(8926),o=s(9016);class i extends n.Z{constructor(e={}){super(e,"blocksFov"),this.blocksFov=this.addArg(new o.Z("blocksFov",!1))}}},8874:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var n=s(8926),o=s(9016);class i extends n.Z{constructor(e={}){super(e,"blocksMovement"),this.blocksMovement=this.addArg(new o.Z("blocksMovement",!1))}onEntityDeath(){this.blocksMovement.set(!1)}}},29:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var n=s(8926),o=s(5091);class i extends n.Z{constructor(e){super(e,"fov"),this.explored=this.addArg(new o.Z("explored",!1)),this.visible=this.addArg(new o.Z("visible",!1))}isExplored(){return this.explored.get()}setExplored(e){this.explored.set(e)}isVisible(){return this.visible.get()}setVisible(e){this.visible.set(e)}}},5203:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var n=s(4652),o=s(5091);class i extends n.default{constructor(e={}){super(e,"aiDead"),this.previousAI=this.addArg(new o.Z("previousAI",""))}perform(e){}}},4652:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var n=s(8926);class o extends n.Z{constructor(e={},t){super(e,"ai",t)}save(){return super.save()}perform(e){console.error("Not Implemented")}}},9589:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var n=s(8926);class o extends n.Z{constructor(e={},t){super(e,"interactable",t)}save(){return super.save()}interact(e,t){}}},3708:(e,t,s)=>{var n={"./BlocksFov.js":5447,"./BlocksMovement.js":8874,"./Fov.js":29,"./ai/AIDead.js":5203,"./ai/_AI.js":4652,"./interactable/_Interactable.js":9589};function o(e){return i(e).then(s)}function i(e){return Promise.resolve().then((()=>{if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}))}o.keys=()=>Object.keys(n),o.resolve=i,o.id=3708,e.exports=o},6463:(e,t,s)=>{"use strict";s.d(t,{Z:()=>L});const n="ArrowLeft",o="ArrowRight",i="ArrowUp",a="ArrowDown",r="Enter",l="Left Shift",c="Right Shift",d="Escape",h="Numpad Enter",p="Numpad .",m="Numpad 0",u="Numpad 1",_="Numpad 2",g="Numpad 3",f="Numpad 4",v="Numpad 5",b="Numpad 6",y="Numpad 7",A="Numpad 8",w="Numpad 9",x="Numpad Delete",k="Numpad Insert",Z="Numpad End",C="Numpad ArrowDown",I="Numpad PageDown",B="Numpad ArrowLeft",M="Numpad Clear",E="Numpad ArrowRight",S="Numpad Home",T="Numpad ArrowUp",D="Numpad PageUp",L=new class{constructor(){const e=this;e.defaultDelay=25,e.lastShiftUp=null,e.treatShiftNumpadEqual=!0,e.keysDown=[],e.keysDelayed=[],e.defaults=new Map,e.controls=new Map,e.defaults.set("up",[A,i]),e.defaults.set("down",[_,a]),e.defaults.set("left",[f,n]),e.defaults.set("right",[b,o]),e.defaults.set("nw",[y]),e.defaults.set("ne",[w]),e.defaults.set("sw",[u]),e.defaults.set("se",[g]),e.defaults.set("wait",[v]),e.defaults.set("escape",[d]),e.defaults.set("confirm",[r,h]),e.load(),addEventListener("keydown",(function(t){"/"===t.key&&t.preventDefault(),e.treatShiftNumpadEqual&&t.getModifierState("NumLock")&&!t.shiftKey&&t.code.startsWith("Numpad")&&t.keyCode<90&&e.lastShiftUp&&(e.keysDown[e.lastShiftUp]=!0);const s=e.getKey(t.key,t.code);e.keysDown[s]=!0}),!1),addEventListener("keyup",(function(t){const s=e.getKey(t.key,t.code);s!==l&&s!==c||(e.lastShiftUp=s),delete e.keysDown[s],delete e.keysDelayed[s]}),!1)}getKey(e,t){if(t.startsWith("Arrow")||(t.endsWith("Left")?e="Left "+e:t.endsWith("Right")?e="Right "+e:t.startsWith("Numpad")&&(e="Numpad "+e)),this.treatShiftNumpadEqual)switch(e){case x:e=p;break;case k:e=m;break;case Z:e=u;break;case C:e=_;break;case I:e=g;break;case B:e=f;break;case M:e=v;break;case E:e=b;break;case S:e=y;break;case T:e=A;break;case D:e=w}return e}load(){const e=localStorage.getItem("controls");e?this.controls=new Map(JSON.parse(e)):this.resetToDefault()}save(){localStorage.setItem("controls",JSON.stringify(Array.from(this.controls.entries())))}setControls(e){this.controls=new Map;for(const[t,s]of e.entries()){const e=[];for(const t of s)e.push(t);this.controls.set(t,e)}this.save()}resetToDefault(){this.setControls(this.defaults)}clone(){const e=new Map;for(const[t,s]of this.controls.entries()){const n=[];for(const e of s)n.push(e);e.set(t,n)}return e}isPressed(e){const t=this;let s=!1,n=t.controls.get(e);if(!n){const s=t.defaults.get(e);s?(t.controls.set(e,s),t.save(),n=s):console.error("Missing keybindings for: ",e,n)}return n.forEach((function(e){e in t.keysDown&&(s=!0)})),s}isDelayed(e){const t=this;let s=!1;return this.controls.get(e).forEach((function(e){e in t.keysDelayed&&(s=!0)})),s}deleteKey(e,t){const s=this;s.controls.get(e).forEach((function(e){delete s.keysDown[e],t&&(s.keysDelayed[e]=!0)})),t&&setTimeout((function(){s.controls.get(e).forEach((function(e){delete s.keysDelayed[e]}))}),t)}testPressed(e,t){t=t||this.defaultDelay;const s=this;let n=!1;return s.isPressed(e)&&!s.isDelayed(e)&&(s.deleteKey(e,t),n=!0),n}}},1950:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s(1450),o=s(5234);class i extends o.Z{constructor(e={}){e.type="tile",super(e)}clone(){return new i(this.save())}isWall(){return this.getComponent("blocksMovement")?.blocksMovement.get()}}var a=s(6649),r=s(7619);const l=new class{constructor(){this.types=new Map,this.templates=new Map,this.loaded=!1,this.init()}init(){this.load(new n.Z),this.load(new i),this.load(new r.Z),this.loadTemplates()}load(e){this.types.set(e.type.get(),e)}create(e,t={}){let s;if(s="object"==typeof e?e:JSON.parse(e),void 0!==s.extends){if(this.templates.has(s.extends)){const e=JSON.parse(this.templates.get(s.extends));return delete s.extends,this.create(a.Z.deep(e,s),t)}console.error("Json template for id '"+s.extends+"' is missing. Cannot extend from it.")}return new(this.types.get(s.type).constructor)(a.Z.deep(s,t))}createFromTemplate(e,t={}){return this.templates.has(e)?this.create(this.templates.get(e),t):(console.error("Json template for id '"+e+"' is missing."),null)}isLoaded(){return this.loaded}loadTemplate(e){for(const t of e){const e=t.id;this.templates.has(e)?console.error("Template for entity id '"+e+"' already exists."):this.templates.set(e,JSON.stringify(t))}}loadTemplates(){const e=s(2798),t=e.keys().length;let n=0;e.keys().forEach((s=>{e(s).then((e=>{this.loadTemplate(e),n++,n===t&&(this.loaded=!0)}))}))}}},7619:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(5234),o=s(5091);class i extends n.Z{constructor(e={}){e.type="item",super(e),this.amount=this.addArg(new o.Z("amount",1)),this.maxStackSize=this.addArg(new o.Z("maxStackSize",1))}clone(){return new i(this.save())}setAmount(e){this.amount.set(e)}}},5234:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s(6649),o=s(9083),i=s(1470),a=s(550),r=s(5091);class l{constructor(e){this.json=e,this.args=[],this.type=this.addArg(new r.Z("type","entity")),this.id=this.addArg(new r.Z("id")),this.name=this.addArg(new r.Z("name"),""),this.description=this.addArg(new r.Z("description","")),this.sprite=this.addArg(new r.Z("sprite","")),this.letter=this.addArg(new r.Z("letter","?")),this.color=this.addArg(new r.Z("color","#fff")),this.componentArray=[],this.components={},e.components&&(this.loadComponents(e,e.components),this.callEvent("onComponentsLoaded")),this.cachedSave=null}clone(){console.error("Not implemented")}callEvent(e,t){for(const s of this.componentArray)s[e]?.(t);this[e]?.(t)}draw(e,t){const s=this.getComponent("position");s&&a.Z.getImage(this.sprite.get()).drawImage(i.Z.ctx,64*(s.x.get()+e),64*(s.y.get()+t))}loadComponents(e,t){const s=this;Object.keys(t).forEach((function(t){const n=o.Z.types.get(t);if(n){const i=n.baseType;s.getComponent(i)||s.setComponent(o.Z.create(this,t,e),!1)}}))}setComponent(e){e.parentEntity=this,this.components[e.baseType]=e,this.componentArray.push(e)}getComponent(e){return this.components[e]}removeComponent(e){if(this.components[e]){this.components[e]=void 0;for(const t of this.componentArray)if(t.baseType===e){const e=this.componentArray.indexOf(t);this.componentArray.splice(e,1);break}}}clearSaveCache(){this.cachedSave=null}save(){if(null!==this.cachedSave)return this.cachedSave;const e={};for(const t of this.args)t.save(e);e.components={};for(const t of this.componentArray){const s=t.save();null!==s&&s!=={}&&n.Z.deep(e.components,s)}return this.cachedSave=e,e}addArg(e){return e.setParentComponentOrEntity(this),this.args.push(e),e.load(this.json),e}}},3918:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});class n{constructor(){this.mouse={x:-1,y:-1},this.mouseDown=!1,window.addEventListener("mousemove",this),window.addEventListener("mousedown",this),window.addEventListener("mouseup",this),window.addEventListener("click",this),window.addEventListener("contextmenu",this),window.addEventListener("change",this),window.addEventListener("keydown",this),this.isPlayerTurn=!0}teardown(){window.removeEventListener("mousemove",this),window.removeEventListener("mousedown",this),window.removeEventListener("mouseup",this),window.removeEventListener("click",this),window.removeEventListener("contextmenu",this),window.removeEventListener("change",this),window.removeEventListener("keydown",this)}handleEvent(e){switch(e.type){case"mousemove":this.onMouseMove(e);break;case"mousedown":this.onMouseDown(e);break;case"mouseup":this.onMouseUp(e);break;case"click":this.onLeftClick(e);break;case"contextmenu":this.onRightClick(e);break;case"change":this.onChange(e);break;case"keydown":this.onKeydown(e)}}handleInput(){}onMouseMove(){}onMouseDown(){this.mouseDown=!0}onMouseUp(){this.mouseDown=!1}onLeftClick(){}onRightClick(){}onChange(){}onKeydown(){}}},5386:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var n=s(8926),o=s(5091);class i extends n.Z{constructor(e={}){super(e,"position"),this.x=this.addArg(new o.Z("x",0)),this.y=this.addArg(new o.Z("y",0))}moveTo(e,t){this.x.set(e),this.y.set(t)}move(e,t){this.x.set(this.x.get()+e),this.y.set(this.y.get()+t)}distanceTo(e){const t=Math.abs(e.x.get()-this.x.get()),s=Math.abs(e.y.get()-this.y.get());return Math.max(t,s)}isAt(e,t){return this.x.get()===e&&this.y.get()===t}isEqual(e){return this.x.get()===e.x.get()&&this.y.get()===e.y.get()}}},1734:(e,t,s)=>{var n={"./Position.js":5386};function o(e){return i(e).then(s)}function i(e){return Promise.resolve().then((()=>{if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}))}o.keys=()=>Object.keys(n),o.resolve=i,o.id=1734,e.exports=o},7729:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s(29);class o{constructor(){this.previousVisibleTiles=[],this.visibleTiles=[],this.visibleActors=[],this.visibleItems=[],this.left=0,this.right=0,this.top=0,this.bottom=0}teardown(){this.previousVisibleTiles=[],this.visibleTiles=[],this.visibleActors=[],this.visibleItems=[]}compute(e,t,s,n){this.previousVisibleTiles=this.visibleTiles,this.visibleTiles=[],this.visibleActors=[],this.visibleItems=[],this.left=Math.max(0,t-n),this.right=Math.min(e.width,t+n+1),this.top=Math.max(0,s-n),this.bottom=Math.min(e.height,s+n+1)}addVisibleTile(e){-1===this.visibleTiles.indexOf(e)&&this.visibleTiles.push(e)}addVisibleActor(e){-1===this.visibleActors.indexOf(e)&&this.visibleActors.push(e)}addVisibleItem(e){-1===this.visibleItems.indexOf(e)&&this.visibleItems.push(e)}exploreTile(e,t,s){const n=e.tiles[t];if(n){const e=n[s];e&&this.addVisibleTile(e)}for(const n of e.actors){const e=n.getComponent("position");e&&e.isAt(t,s)&&this.addVisibleActor(n)}for(const n of e.items){const e=n.getComponent("position");e&&e.isAt(t,s)&&this.addVisibleItem(n)}}updateMap(){for(const e of this.previousVisibleTiles)e.getComponent("fov")?.setVisible(!1);for(const e of this.visibleTiles){const t=e.getComponent("fov");t?(t.setExplored(!0),t.setVisible(!0)):e.setComponent(new n.default({components:{fov:{explored:!0,visible:!0}}}))}}}class i{constructor(e,t){this.y=e,this.x=t}greater(e,t){return this.y*t>this.x*e}greaterOrEqual(e,t){return this.y*t>=this.x*e}lessOrEqual(e,t){return this.y*t<=this.x*e}}class a extends o{constructor(){super()}compute(e,t,s,n){super.compute(e,t,s,n),this.exploreTile(e,t,s);for(let o=0;o<8;o++)this.computeOctant(e,o,t,s,n,1,new i(1,1),new i(0,1))}computeOctant(e,t,s,n,o,a,r,l){for(;a<=o;a++){let c,d;if(1===r.x)c=a;else if(c=Math.round(((2*a-1)*r.y+r.x)/(2*r.x)),this.blocksLight(e,t,s,n,a,c))r.greaterOrEqual(2*c+1,2*a)&&!this.blocksLight(e,t,s,n,a,c+1)&&c++;else{let o=2*a;this.blocksLight(e,t,s,n,a+1,c+1)&&o++,r.greater(2*c+1,o)&&c++}0===l.y?d=0:(d=((2*a-1)*l.y+l.x)/(2*l.x),l.greaterOrEqual(2*d+1,2*a)&&this.blocksLight(e,t,s,n,a,d)&&!this.blocksLight(e,t,s,n,a,d+1)&&d++);let h=-1;for(let p=c;p>=d;p--){const m=this.blocksLight(e,t,s,n,a,p);if((m||(p!==c||r.greaterOrEqual(p,a))&&(p!==d||l.lessOrEqual(p,a)))&&this.setVisible(e,t,s,n,a,p),a!==o)if(m){if(0===h){const c=2*a,h=2*p+1;if(r.greater(h,c)){if(p===d){l=new i(h,c);break}this.computeOctant(e,t,s,n,o,a+1,r,new i(h,c))}else if(p===d)return}h=1}else{if(h>0){const e=2*a,t=2*p+1;if(l.greaterOrEqual(t,e))return;r=new i(t,e)}h=0}}if(0!==h)break}}blocksLight(e,t,s,n,o,i){switch(t){case 0:s+=o,n-=i;break;case 1:s+=i,n-=o;break;case 2:s-=i,n-=o;break;case 3:s-=o,n-=i;break;case 4:s-=o,n+=i;break;case 5:s-=i,n+=o;break;case 6:s+=i,n+=o;break;case 7:s+=o,n+=i}let a=!1;const r=e.tiles;if(r[s]){const e=r[s][n];if(e){const t=e.getComponent("blocksFov");t&&(a=t.blocksFov.get())}}return a}setVisible(e,t,s,n,o,i){switch(t){case 0:s+=o,n-=i;break;case 1:s+=i,n-=o;break;case 2:s-=i,n-=o;break;case 3:s-=o,n-=i;break;case 4:s-=o,n+=i;break;case 5:s-=i,n+=o;break;case 6:s+=i,n+=o;break;case 7:s+=o,n+=i}this.exploreTile(e,s,n)}}},5986:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});class n{constructor(e){this.content=[],this.scoreFunction=e}push(e){this.content.push(e),this.sinkDown(this.content.length-1)}pop(){const e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e}remove(e){const t=this.content.indexOf(e),s=this.content.pop();t!==this.content.length-1&&(this.content[t]=s,this.scoreFunction(s)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))}size(){return this.content.length}rescoreElement(e){this.sinkDown(this.content.indexOf(e))}sinkDown(e){const t=this.content[e];for(;e>0;){const s=(e+1>>1)-1,n=this.content[s];if(!(this.scoreFunction(t)<this.scoreFunction(n)))break;this.content[s]=t,this.content[e]=n,e=s}}bubbleUp(e){const t=this.content.length,s=this.content[e],n=this.scoreFunction(s);let o=!1;for(;!o;){const i=e+1<<1,a=i-1;let r,l=null;if(a<t){const e=this.content[a];r=this.scoreFunction(e),r<n&&(l=a)}if(i<t){const e=this.content[i];this.scoreFunction(e)<(null===l?n:r)&&(l=i)}if(null===l){o=!0;break}this.content[e]=this.content[l],this.content[l]=s,e=l}}}class o{constructor(){}static pathTo(e){let t=e;const s=[];for(;t.parent;)s.unshift(t),t=t.parent;return s}static getHeap(){return new n((function(e){return e.f}))}static search(e,t,s,n){e.cleanDirty(),n=n||{},this.heuristicType=n.heuristic||"manhattan";const o=n.closest||!1,i=this.getHeap();let a=t;for("manhattan"===this.heuristicType?t.h=this.heuristicManhattan(t,s):"diagonal"===this.heuristicType&&this.heuristicDiagonal(t,s),e.markDirty(t),i.push(t);i.size()>0;){const t=i.pop();if(t===s)return this.pathTo(t);t.closed=!0;const n=e.neighbors(t);for(let r=0,l=n.length;r<l;++r){const l=n[r];if(l.closed||l.isWall())continue;const c=t.g+l.getCost(t),d=l.visited;(!d||c<l.g)&&(l.visited=!0,l.parent=t,"manhattan"===this.heuristicType?l.h=l.h||this.heuristicManhattan(l,s):"diagonal"===this.heuristicType&&(l.h=l.h||this.heuristicDiagonal(l,s)),l.g=c,l.f=l.g+l.h,e.markDirty(l),o&&(l.h<a.h||l.h===a.h&&l.g<a.g)&&(a=l),d?i.rescoreElement(l):i.push(l))}}return o?this.pathTo(a):[]}static heuristicManhattan(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}static heuristicDiagonal(e,t){const s=Math.sqrt(2),n=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);return 1*(n+o)+(s-2)*Math.min(n,o)}static cleanNode(e){e.f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=null}}},5539:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(5986);class o{constructor(e,t,s){this.x=e,this.y=t,this.weight=s}toString(){return"["+this.x+" "+this.y+"]"}getCost(e){return e&&e.x!==this.x&&e.y!==this.y?1.41421*this.weight:this.weight}isWall(){return 0===this.weight}}class i{constructor(e,t){t=t||{},this.nodes=[],this.diagonal=!!t.diagonal,this.grid=[];for(let t=0;t<e.length;t++){this.grid[t]=[];for(let s=0,n=e[t];s<n.length;s++){const e=new o(t,s,n[s]);this.grid[t][s]=e,this.nodes.push(e)}}this.init()}init(){this.dirtyNodes=[];for(let e=0;e<this.nodes.length;e++)n.Z.cleanNode(this.nodes[e])}cleanDirty(){for(let e=0;e<this.dirtyNodes.length;e++)n.Z.cleanNode(this.dirtyNodes[e]);this.dirtyNodes=[]}markDirty(e){this.dirtyNodes.push(e)}neighbors(e){const t=[],s=e.x,n=e.y,o=this.grid;return o[s-1]&&o[s-1][n]&&t.push(o[s-1][n]),o[s+1]&&o[s+1][n]&&t.push(o[s+1][n]),o[s]&&o[s][n-1]&&t.push(o[s][n-1]),o[s]&&o[s][n+1]&&t.push(o[s][n+1]),this.diagonal&&(o[s-1]&&o[s-1][n-1]&&t.push(o[s-1][n-1]),o[s+1]&&o[s+1][n-1]&&t.push(o[s+1][n-1]),o[s-1]&&o[s-1][n+1]&&t.push(o[s-1][n+1]),o[s+1]&&o[s+1][n+1]&&t.push(o[s+1][n+1])),t}toString(){const e=[],t=this.grid;for(let s=0;s<t.length;s++){const n=[],o=t[s];for(let e=0;e<o.length;e++)n.push(o[e].weight);e.push(n.join(" "))}return e.join("\n")}}},550:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s(1470),o=s(4756);class i{constructor(e,t,s,n,i,a){this.imageName=e,this.textureName=t,this.texture=o.Z.getTexture(t),this.x=s,this.y=n,this.w=i||64,this.h=a||64}loadTexture(){return null===this.texture&&(this.texture=o.Z.getTexture(this.textureName)),null!==this.texture}drawImage(e,t,s,o){null!==o&&o>0?(e.save(),e.translate((t+this.w/2)*n.Z.scale,(s+this.h/2)*n.Z.scale),e.rotate(o*Math.PI/180),e.drawImage(this.texture,this.x,this.y,this.w,this.h,-this.w/2*n.Z.scale,-this.h/2*n.Z.scale,this.w*n.Z.scale,this.h*n.Z.scale),e.restore()):e.drawImage(this.texture,this.x,this.y,this.w,this.h,t*n.Z.scale,s*n.Z.scale,this.w*n.Z.scale,this.h*n.Z.scale)}}const a=new class{constructor(){this.sprites=[],this.spritesPreloaded=!1}addImage(e,t,s,n,o,a){this.sprites.push(new i(e,t,s,n,o,a))}getImage(e){const t=this.sprites.length;for(let s=0;s<t;s++)if(this.sprites[s].imageName===e)return this.sprites[s];return null}preloadSprites(){if(!this.spritesPreloaded){const e=this.sprites.length;let t=0;this.sprites.forEach((function(e){e.loadTexture()&&t++})),t===e&&(this.spritesPreloaded=!0)}return this.spritesPreloaded}}},4756:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});class n{constructor(e,t){this.name=e,this.image=t}}var o=s(550);const i=new class{constructor(){this.textures=[]}addTexture(e,t){const s=this,o=new Image;o.onload=function(){s.textures.push(new n(e,o))},o.src=t}getTexture(e){const t=this.textures.length;for(let s=0;s<t;s++)if(this.textures[s].name===e)return this.textures[s].image;return null}loadJson(e,t){const s=t.tileSize,n=t.name,i=t.width,a=t.tiles;let r=0,l=0;for(const t of a)o.Z.addImage(n+"_"+t,e,l*s,r*s),l++,l>=i&&(l-=i,r++)}}},1599:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});class n{constructor(e){this.dom=this.htmlToElement(e)}htmlToElement(e){const t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.firstChild}appendTo(e){e.appendChild(this.dom)}isOpen(){return this.dom.classList.contains("active")}open(){this.dom.classList.contains("active")||this.dom.classList.add("active")}close(){this.dom.classList.remove("active")}}},6649:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});class n{constructor(){}static extend(e){e=e||{};for(let t=1;t<arguments.length;t++)if(arguments[t])for(const s in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],s)&&(e[s]=arguments[t][s]);return e}static deep(e){e=e||{};for(let t=1;t<arguments.length;t++){const s=arguments[t];if(s)for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&("object"==typeof s[t]?s[t]instanceof Array?e[t]=s[t].slice(0):e[t]=n.deep(e[t],s[t]):"boolean"==typeof e&&void 0===e[t]?e=s[t]:e[t]=s[t])}return e}}},6297:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});class n{constructor(){}static randomInt(e,t){return Math.floor(Math.random()*(t-e+1)+e)}static randomNumber(e,t){return Math.random()*(t-e)+e}}},8680:(e,t,s)=>{"use strict";s.d(t,{Z:()=>w});var n=s(9970),o=s(9691),i=s(3432),a=s(1175),r=s(4756),l=s(550);const c=s.p+"25dbe165d77e35f10dd9.gif",d=s.p+"5c5b2bc2ae027c4c410f.gif",h=s.p+"faa4b7a1876d79a2e697.png",p=JSON.parse('{"tileSize":64,"width":14,"name":"scribble","tiles":["tile","floor_path_curve","floor_wall_corner","floor_wall","floor_door_closed","floor_crate_small","floor_table","grass","path_curve","wall_corner","wall","door_closed","crate_small","table","tiles","floor_path","floor_wall_curve","floor_wall_half","floor_doorway","floor_barrel","floor_chair","crate","path","wall_curve","wall_half","doorway","barrel","chair","tiles_corner","floor_path_crossing","floor_wall_diagonal","floor_wall_damaged","floor_door_open","floor_barrels","floor_planks","trap_door","path_crossing","wall_diagonal","wall_damaged","door_open","barrels","planks","tiles_center","floor_track_curve","floor_wall_edge","floor_wall_secret","floor_trap","floor_barrels_stacked","floor_bed_luxurious","stairs_down","track_curve","wall_edge","wall_secret","trap","barrels_stacked","bed_luxurious","tiles_decorative","floor_track","floor_inner_round","floor_wall_trap","floor_chest","floor_arrow_curve","floor_bed","stairs_down_detail","track","inner_round","wall_trap","chest","arrow_curve","bed","tiles_cracked","floor_track_crossing","floor_inner_diagonal","floor_wall_demolished","floor_campfire","floor_arrow","floor_coffin","bridge","track_crossing","inner_diagonal","wall_demolished","campfire","arrow","coffin","wood","floor_track_cart","floor_inner_long_round","floor_trapdoor_square","floor_plants","floor_arrow_head","floor_puddle","bridge_end","track_cart","inner_long_round","trapdoor_square","plants","arrow_head","puddle","water","floor_cart","floor_inner_long_diagonal","floor_trapdoor_round","floor_tree","floor_arrow_circle","floor_dragon","carpet","cart","inner_long_diagonal","trapdoor_round","tree","arrow_circle","dragon","red_character","red_hand","purple_character","purple_hand","yellow_character","yellow_hand","green_character","green_hand","wall_full","blood_3","blood_2","blood_1","blank_0_4","blank_0_5","weapon_dagger","weapon_sword","weapon_longsword","weapon_pole","weapon_spear","weapon_bow_arrow","weapon_bow","weapon_arrow","blank_1_0","blank_1_1","blank_1_2","blank_1_3","blank_1_4","blank_1_5","weapon_axe_blades","weapon_axe_large","weapon_axe_double","weapon_axe","weapon_hammer","weapon_staff","shield_curved","shield_straight","blank_2_0","blank_2_1","blank_2_2","blank_2_3","blank_2_4","blank_2_5"]}'),m=s.p+"baf6200e3e3da9d03374.png",u=JSON.parse('{"tileSize":64,"width":2,"name":"webs","tiles":["cobweb_large","cobweb"]}'),_=s.p+"4a083d3aa277d83d586b.png",g=JSON.parse('{"tileSize":64,"width":30,"name":"rltiles","tiles":["shade","earth_elemental","fire_elemental","fog_cloud","death_cob","asmodeus","cerebov","dispater","ereshkigal","geryon","gloorx_vloq","lom_lobon","mnoleg","pandemonium_demon","shocking_sphere","flaming_sphere","balrog","blue_death","cacodemon","executioner","fiend","green_death","ice_fiend","pit_fiend","shadow_fiend","ice_devil","lorocyproca","reaper","soul_eater","sun_demon","blue_devil","demonic_crawler","hellion","hellwing","iron_devil","neqoxec","orange_demon","shadow_demon","tormentor","ynoxinul","beast","hairy_devil","red_devil","rotting_devil","smoke_demon","imp","lemure","manes","midge","shadow_imp","ufetubus","white_imp","clay_golem","glass_golem","electric_golem","iron_golem","stone_golem","toenail_golem","wood_golem","big_fish","electrical_eel","giant_goldfish","lava_fish","adolf","agnes","donald","duane","edmund","erica","frances","francis","glowing_shapeshifter","harold","hell_knight","human","jessica","joseph","josephine","jozef","killer_klown","louise","margery","maud","michael","necromancer","norbert","norris","psyche","rupert","shapeshifter","sigmund","terence","vault_guard","wayne","wizard","angel","boring_beetle","boulder_beetle","giant_beetle","program_bug","orion","cyclops","ettin","fire_giant","frost_giant","hill_giant","stone_giant","titan","green_dragon","golden_dragon","hydra1","hydra2","hydra3","hydra4","hydra5","white_dragon","iron_dragon","quicksilver_dragon","serpent_of_hell","black_dragon","skeletal_dragon","blue_dragon","swamp_dragon","wyvern","xtahua","efreet","blink_frog","giant_brown_frog","giant_frog","spiny_frog","eye_of_devastation","eye_of_draining","floating_eye","giant_orange_brain","gas_spore","great_orb_of_eyes","shining_eye","griffon","hippogriff","sphinx","ice_beast","acid_blob","spotted_jelly","brown_pudding","death_ooze","giant_amoeba","jelly","jellyfish","gray_ooze","pulsating_lump","lump_of_royal_jelly","green_slime","big_kobold","kobold","kobold_demonologist","ancient_lich","boris","lich","greater_mummy","guardian_mummy","mummy","mummy_priest","naga0","greater_naga0","naga_warrior0","guardian_naga","naga_mage","erolcha","ogre","ogre_mage","two_headed_ogre","oklob_plant","plant","queen_ant","queen_bee","rakshasa","rakshasa_fake","black_snake","brown_snake","grey_snake","lava_snake","salamander","garter_snake","snake","yellow_snake","water_troll","iron_troll","rock_troll","snorg","troll","bear","black_bear","grizzly_bear","polar_bear","vampire","vampire_knight","vampire_mage","freezing_wraith","shadow_wraith","spectral_thing","spectral_warrior","barrow_wight","wraith","juiblex","abomination_large1","abomination_large2","abomination_large3","abomination_large4","abomination_large5","abomination_large6","orb_guardian","tentacled_monstrosity","death_yak","sheep","yak","simulacrum_large","skeleton","giant_zombie","giant_ant","giant_cockroach","soldier_ant","butterfly","butterfly1","butterfly2","butterfly3","butterfly4","butterfly5","butterfly6","giant_bat","plains_centaur","centaur_warrior","yaktaur","yaktaur_captain","firedrake","lindwurm","mottled_dragon","steam_dragon","swamp_drake","elf","deep_elf_fighter0","deep_elf_soldier0","deep_elf_knight0","deep_elf_mage","deep_elf_sorcerer","deep_elf_conjurer","deep_elf_death_mage","deep_elf_demonologist","deep_elf_summoner","deep_elf_annihilator","deep_elf_priest","deep_elf_high_priest","fungus","wandering_mushroom","goblin0","hobgoblin0","gnoll0","ijyb","boggart","gargoyle","metal_gargoyle","molten_gargoyle","hell_hog","hell_hound","hog","hound","warg","war_dog","wolf","jackal","bumblebee","killer_bee","gecko","giant_iguana","giant_lizard","newt","gila_monster","komodo_dragon","elephant_slug","giant_slug","giant_snail","manticore","minotaur","ghoul","necrophage","rotting_hulk","orc0","orc_warrior0","orc_knight0","orc_warlord0","blork_the_orc0","urug0","orc_priest","orc_high_priest","orc_sorcerer","orc_wizard","flayed_ghost","hungry_ghost","insubstantial_wisp","phantom","ghost","quasit","green_rat","sewer_rat","orange_rat","quokka","rat","centipede","giant_mite","redback","scorpion","giant_spider","ugly_thing","very_ugly_thing","air_elemental","fire_vortex","spatial_vortex","killer_bee_larva","brain_worm","lava_worm","spiny_worm","swamp_worm","worm","abomination_small","unseen_horror","giant_blowfly","giant_mosquito","moth_of_wrath","red_wasp","curse_skull","curse_toe","flying_skull","simulacrum_small","skeletal_warrior","orc_zombie","water_elemental","fire_ant","quivering_blob","gelatinous_cube","chickatrice","cockatrice","pyrolisk","fox","coyote","werejackal","little_dog","dog","large_dog","dingo","werewolf","winter_wolf_cub","winter_wolf","hell_hound_pup","cerberus","freezing_sphere","beholder","kitten","housecat","jaguar","lynx","panther","large_cat","tiger","gremlin","winged_gargoyle","hobbit","dwarf","bugbear","dwarf_lord","dwarf_king","mind_flayer","master_mind_flayer","homunculus","tengu","blue_jelly","ochre_jelly","large_kobold","kobold_lord","kobold_shaman","leprechaun","small_mimic","large_mimic","giant_mimic","wood_nymph","water_nymph","mountain_nymph","goblin","hobgoblin","orc","hill_orc","mordor_orc","uruk-hai","orc_shaman","orc-captain","rock_piercer","iron_piercer","glass_piercer","rothe","mumak","leocrotta","wumpus","titanothere","baluchitherium","mastodon","giant_rat","rabid_rat","wererat","rock_mole","woodchuck","cave_spider","lurker_above","trapper","white_unicorn","gray_unicorn","black_unicorn","pony","horse","warhorse","dust_vortex","ice_vortex","energy_vortex","steam_vortex","baby_long_worm","baby_purple_worm","long_worm","purple_worm","grid_bug","xan","yellow_light","black_light","zruty","couatl","aleax","ki-rin","archon","bat","raven","vampire_bat","forest_centaur","mountain_centaur","baby_gray_dragon","baby_silver_dragon","baby_shimmering_dragon","baby_red_dragon","baby_white_dragon","baby_orange_dragon","baby_black_dragon","baby_blue_dragon","baby_green_dragon","baby_yellow_dragon","gray_dragon","silver_dragon","shimmering_dragon","red_dragon","orange_dragon","yellow_dragon","stalker","lichen","brown_mold","yellow_mold","green_mold","red_mold","shrieker","violet_fungus","gnome","gnome_lord","gnomish_wizard","gnome_king","giant","storm_giant","jabberwock","vorpal_jabberwock","keystone_kop","kop_sergeant","kop_lieutenant","kop_kaptain","demilich","master_lich","arch-lich","kobold_mummy","gnome_mummy","orc_mummy","dwarf_mummy","elf_mummy","human_mummy","ettin_mummy","giant_mummy","red_naga_hatchling","black_naga_hatchling","golden_naga_hatchling","guardian_naga_hatchling","red_naga","black_naga","golden_naga","ogre_lord","ogre_king","black_pudding","quantum_mechanic","rust_monster","disenchanter","water_moccasin","pit_viper","python","cobra","ice_troll","olog-hai","umber_hulk","vampire_lord","vlad_the_impaler","nazgul","xorn","monkey","ape","owlbear","yeti","carnivorous_ape","sasquatch","kobold_zombie","gnome_zombie","dwarf_zombie","elf_zombie","human_zombie","ettin_zombie","straw_golem","paper_golem","rope_golem","gold_golem","leather_golem","flesh_golem","woodland-elf","green-elf","grey-elf","elf-lord","elvenking","doppelganger","nurse","shopkeeper","guard","prisoner","oracle","aligned_priest","high_priest","soldier","sergeant","lieutenant","captain","watchman","watch_captain","medusa","wizard_of_yendor","croesus","charon","water_demon","horned_devil","succubus","incubus","erinys","barbed_devil","marilith","vrock","hezrou","bone_devil","nalfeshnee","yeenoghu","orcus","baalzebub","demogorgon","death","pestilence","famine","mail_daemon","djinni","sandestin","piranha","shark","giant_eel","electric_eel","kraken","iguana","baby_crocodile","lizard","chameleon","crocodile","long_worm_tail","archeologist","barbarian","caveman","cavewoman","healer","knight","monk","priest","priestess","ranger","rogue","samurai","tourist","valkyrie","lord_carnarvon","pelias","shaman_karnov","earendil","elwing","hippocrates","king_arthur","grand_master","arch_priest","master_of_thieves","lord_sato","twoflower","norn","wizard_of_balance","minion_of_huhetotl","thoth_amon","chromatic_dragon","goblin_king","ixoth","master_kaen","nalzok","scorpius","master_assassin","ashikaga_takauji","lord_surtur","dark_one","student","chieftain","neanderthal","high-elf","attendant","page","abbot","acolyte","hunter","thug","ninja","roshi","guide","warrior","apprentice","invisible_monster","strange_object","spwpn_singing_sword","spwpn_wrath_of_trog","spwpn_scythe_of_curses","spwpn_mace_of_variability","spwpn_glaive_of_prune","spwpn_sceptre_of_torment","spwpn_sword_of_zonguldrok","spwpn_sword_of_cerebov","spwpn_staff_of_dispater","spwpn_sceptre_of_asmodeus","spwpn_sword_of_power","spwpn_knife_of_accuracy","spwpn_staff_of_olgreb","spwpn_vampires_tooth","quarterstaff","urand_bloodbane","urand_fkaming_death","urand_brilliance","urand_leech","urand_chilly_death","urand_morg","urand_finisher","urand_punk","urand_krishna","urand_skullcrusher","urand_guard","urand_jihad","urand_fiery_devil","urand_doom_knight","urand_eos","urand_voo_doo","urand_octopus_king","urand_arga","urand_elemental","urand_sniper","urand_erchidel","urand_plutonium","urand_undeadhunter","urand_ignorance","urand_zin","urand_augmentation","urand_thief","urand_bullseye","urand_dyrovepreva","urand_misfortune","urand_flash","urand_assassin","urand_lear","urand_zhor","urand_salamander","urand_war","urand_resistance","urand_folly","urand_edison","urand_dragonmask","urand_night","urand_dragon_king","urand_alchemist","urand_fencer","urand_shadows","urand_shaolin","urand_robustness","urand_mage","urand_cekugob","urand_four_winds","urand_bloodlust","club","mace2","mace_large","mace_large2","flail2","flail","flail_angmar","morningstar2","eveningstar","hammer","ancus","bullwhip","demon_whip","giant_club","giant_spiked_club","knife","dagger","orcish_dagger","elven_dagger","short_sword","short_sword2","orcish_short_sword","elven_short_sword","long_sword2","long_sword3","orcish_long_sword","greatsword","greatsword2","orcish_great_sword","falchion","scimitar","silver_saber","sabre2","quickblade","katana2","katana3","double_sword","triple_sword","demon_blade","hand_axe","war_axe","battle_axe2","broad_axe2","battle_axe","battle_axe3","executioner_axe","executioner_axe2","blowgun","sling","bow","crossbow","crossbow2","glaive","orcish_glaive","elven_spear","spear2","halberd","scythe","trident","demon_trident","stone","ya","arrow0","arrow1","arrow2","arrow3","arrow4","arrow5","arrow6","arrow7","crossbow_bolt","bolt0","bolt1","bolt2","bolt3","bolt4","bolt5","bolt6","bolt7","dart","dart-p","dart0","dart1","dart2","dart3","dart4","dart5","dart6","dart7","needle","needle-p","needle0","needle1","needle2","needle3","needle4","needle5","needle6","needle7","rock","robe","robe2","robe3","leather_armor2","breast_plate2","leather_armor4","orcish_leather_armor","elven_leather_armor","ring_mail","ring_mail2","orcish_ringmail","elven_ringmail","dwarven_ringmail","scale_mail","scale_mail2","elven_scalemail","chain_mail1","chain_mail2","orcish_chain_mail","splint_mail","banded_mail","plate_mail2","orcish_platemail","crystal_plate_mail","animal_skin","animal_skin2","troll_hide","troll_leather_armour","green_dragon_scales","green_dragon_scale_mail","ice_dragon_hide","ice_dragon_armour","silver_dragon_scales","silver_dragon_scale_mail","mottled_dragon_hide","mpttled_dragon_armour","blue_dragon_scales","blue_dragon_scale_mail","gold_dragon_hide","gold_dragon_armour","swamp_dragon_hide","swamp_dragon_armour","elven_shield","shield_kite2","shield_round2","small_shield","small_shield2","large_shield","shield_large2","shield_kite3","leather_cloak","cloak2","cloak3","cloak4","elven_leather_helm","wizard_hat","wizard_hat2","visored_helmet","etched_helmet","helm3","helm_visor1","glove1","glove3","glove5","gauntlet2","boots_brown1","jackboots","boots_stripe1","boots_green2","gem_iron","gem_brass","gem_bone","gem_wood","gem_copper","gem_gold","gem_silver","gem_bronze","gem_ivory","gem_glass","gem_lead","gem_plastic","i-flame","i-frost","i-slowing","i-hasting","i-magic_darts","i-healing","i-paralysis","i-fire","i-cold","i-confusion","i-invisibility","i-digging","i-fireball","i-teleportation","i-lightning","i-polymorph_other","i-enslavement","i-draining","i-random_effects","i-disintegration","tripe_ration","bread_ration","pear","apple","choko","honeycomb","snozzcumber","pizza","apricot","orange","banana","strawberry","rambutan","lemon","grape","sultana","lychee","beef_jerky","cheese","sausage","corpse","corpse_rotten","bone","kernod_wel","i-identify","i-fear","i-noise","i-remove_curse","i-detect_curse","i-summoning","i-enchant-weapon1","i-enchant_armour","i-torment","i-random_uselessness","i-curse_weapon","i-curse_armour","i-immolation","i-blinking","blank_paper","i-magic_mapping","i-foregetfulness","i-acquirement","i-enchant-weapon2","i-vorpalize-weapon","i-recharging","i-enchant-weapon3","wooden","silver","gold","iron","steel","bronze","brass","copper","granite","ivory","clay","tiger_eye","jade","glass","agate","diamond","emerald","gold_green","gold_red","opal","pearl","coral","gold_blue","plain_red","plain_yellow","plain_black","moonstone","crystal_white","stone3_blue","face1_gold","stone3_green","stone2_red","eye_magenta","face2","penta_orange","celtic_red","cameo_blue","bone_gray","cylinder_gray","ring_green","ring_cyan","crystal_green","cameo_orange","celtic_blue","eye_cyan","penta_green","ring_red","stone1_cyan","stone1_pink","stone2_green","stone3_magenta","celtic_yellow","stone1_green","stone2_blue","crystal_red","eye_green","clear","brilliant_blue","black","cyan","magenta","dark","ruby","yellow","brown","pink","white","i-heal","i-heal-wounds","i-speed","i-might","i-gain-strength","i-gain-dexterity","i-gain-intelligence","i-levitation","i-poison","i-porridge","i-degeneration","i-decay","i-water","i-experience","i-magic","i-restore-abilities","i-strong-poison","i-berserk-rage","i-cure-mutation","i-mutation","book_of_the_dead","dark_blue","dark_green","red","purple","tan","light_gray","dark_gray","light_blue","light_green","turquoise","parchment","leather","plaid","light_brown","dark_brown","glittering","metal_blue","metal_cyan","metal_green","cloth","staff00","staff01","staff02","staff03","staff04","staff05","staff06","staff07","staff08","staff09","misc_orb","misc_bottle","misc_crystal","misc_fan","misc_lamp","misc_stone","misc_lantern","misc_horn","misc_box","misc_deck","misc_disc","misc_rune","misc_altar","gold_piece","arrow","elven_arrow","orcish_arrow","silver_arrow","shuriken","boomerang","spear","orcish_spear","dwarvish_spear","silver_spear","javelin","silver_dagger","athame","scalpel","stiletto","worm_tooth","crysknife","axe","dwarvish_short_sword","broadsword","elven_broadsword","long_sword","two_handed_sword","katana","tsurugi","runesword","partisan","ranseur","spetum","lance","bardiche","voulge","dwarvish_mattock","fauchard","guisarme","bill_guisarme","lucern_hammer","bec_de_corbin","mace","morning_star","war_hammer","rubber_hose","aklys","elven_bow","orcish_bow","yumi","orcish_helm","dwarvish_iron_helm","fedora","cornuthaum","dunce_cap","dented_pot","plumed_helmet","crested_helmet","gray_dragon_scale_mail","shimmering_dragon_scale_mail","red_dragon_scale_mail","white_dragon_scale_mail","orange_dragon_scale_mail","black_dragon_scale_mail","yellow_dragon_scale_mail","gray_dragon_scales","shimmering_dragon_scales","red_dragon_scales","white_dragon_scales","orange_dragon_scales","black_dragon_scales","yellow_dragon_scales","plate_mail","bronze_plate_mail","dwarvish_mithril_coat","elven_mithril_coat","chain_mail","studded_leather_armor","orcish_ring_mail","leather_armor","leather_jacket","hawaiian_shirt","t_shirt","mummy_wrapping","elven_cloak","orcish_cloak","dwarvish_cloak","oilskin_cloak","alchemy_smock","tattered_cape","opera_cloak","ornamental_cope","piece_of_cloth","uruk_hai_shield","orcish_shield","dwarvish_roundshield","shield_of_reflection","old_gloves","padded_gloves","riding_gloves","fencing_gloves","low_boots","iron_shoes","combat_boots","jungle_boots","hiking_boots","mud_boots","buckled_boots","riding_boots","snow_boots","black_onyx","topaz","sapphire","twisted","wire","engagement","shiny","circular","spherical","oval","triangular","pyramidal","square","concave","hexagonal","octagonal","amulet_of_yendor","large_box","chest","ice_box","sack","skeleton_key","lock_pick","credit_card","tallow_candle","wax_candle","brass_lantern","lamp","expensive_camera","mirror","crystal_ball","lenses","blindfold","towel","saddle","leash","stethoscope","tinning_kit","tin_opener","can_of_grease","figurine","magic_marker","land_mine","beartrap","whistle","flute","horn","harp","bell","bugle","drum","pick_axe","grappling_hook","unicorn_horn","candelabrum_of_invocation","bell_of_opening","egg","meatball","meat_stick","huge_chunk_of_meat","meat_ring","kelp_frond","eucalyptus_leaf","melon","carrot","sprig_of_wolfsbane","clove_of_garlic","slime_mold","cream_pie","candy_bar","fortune_cookie","pancake","lembas_wafer","cram_ration","food_ration","k_ration","c_ration","tin","sky_blue","purple_red","puce","milky","swirly","bubbly","smoky","cloudy","effervescent","golden","fizzy","murky","zelgo_mer","juyed_awk_yacc","nr_9","xixaxa_xoxaxa_xuxaxa","pratyavayah","daiyen_fooels","lep_gex_ven_zea","prirutsenie","elbib_yloh","verr_yed_horre","venzar_borgavve","tharr","yum_yum","elam_ebow","duam_xnaht","andova_begarin","kirje","ve_forbryderne","hackem_muche","velox_neb","foobie_bletch","temov","garven_deh","read_me","mail","vellum","ragged","dog_eared","mottled","stained","velvet","indigo","violet","gray","wrinkled","dusty","shining","dull","thin","thick","balsa","crystal","maple","pine","oak","ebony","marble","platinum","iridium","zinc","aluminum","uranium","short","runed","long","curved","forked","spiked","jeweled","blue","green","yellowish_brown","grey_stone","boulder","statue","heavy_iron_ball","iron_chain","blank","dark_part_of_a_room","dngn_rock_wall_00","dngn_rock_wall_01","dngn_rock_wall_02","dngn_rock_wall_03","dngn_rock_wall_04","dngn_rock_wall_05","dngn_rock_wall_06","dngn_rock_wall_07","dngn_rock_wall_08","dngn_rock_wall_09","dngn_rock_wall_10","dngn_rock_wall_11","dngn_rock_wall_12","dngn_rock_wall_13","dngn_rock_wall_14","dngn_rock_wall_15","dngn_stone_wall","dngn_closed_door","dngn_metal_wall","dngn_green_crystal_wall","dngn_orcish_idol","dngn_wax_wall","dngn_silver_statue","dngn_granite_statue","dngn_orange_crystal_statue","dngn_lava","dngn_deep_water","dngn_shallow_water","floor_of_a_room","dngn_enter_hell","dngn_open_door","staircase_down","dngn_trap_mechanical","dngn_trap_magical","dngn_trap_iii","dngn_enter_shop","dngn_enter_labyrinth","staircase_up","dngn_enter_dis","dngn_enter_gehenna","dngn_enter_cocytus","dngn_enter_tartarus","dngn_enter_abyss","dngn_exit","dngn_stone_arch","dngn_enter_pandemonium","dngn_transit_pandemonium","dngn_enter","dngn_return","dngn_altar_zin","dngn_altar_shining_one","dngn_altar_kikubaaqudgha","dngn_altar_yredelemnul","dngn_altar_xom","dngn_altar_vehumet","dngn_altar_okawaru","dngn_altar_makhleb","dngn_altar_sif_muna","dngn_altar_trog","dngn_altar_nemelex_xobeh","dngn_altar_elyvilon","dngn_blue_fountain","dngn_dry_fountain","dngn_sparkling_fountain","blinding_venom","acid_venom","wall_main00","wall_main01","wall_main02","wall_main03","wall_main04","wall_main05","wall_main06","wall_main07","wall_main08","wall_main09","wall_main10","doorway","open_door_h","open_door_v","closed_door_h","closed_door_v","iron_bars","tree","corridor","lit_corridor","ladder_up","ladder_down","altar","grave","opulent_throne","sink","fountain","water","ice","molten_lava","lowered_drawbridge_v","lowered_drawbridge_h","raised_drawbridge_v","raised_drawbridge_h","air","cloud","arrow_trap","dart_trap","falling_rock_trap","squeaky_board","bear_trap","rolling_boulder_trap","sleeping_gas_trap","rust_trap","fire_trap","pit","spiked_pit","hole","trap_door","teleportation_trap","level_teleporter","magic_portal","web","statue_trap","magic_trap","anti_magic_trap_field","polymorph_trap","zigzag1","zigzag2","zigzag3","zigzag4","zap_dig","zap_flash","boomerang1","boomerang2","resist1","resist2","resist3","resist4","engulf1","engulf2","engulf3","engulf4","engulf5","engulf6","engulf7","engulf8","explode_black0","explode_black1","explode_black2","explode_black3","explode_black4","explode_black5","explode_black6","explode_black7","explode_black8","explode_green0","explode_green1","explode_green2","explode_green3","explode_green4","explode_green5","explode_green6","explode_green7","explode_green8","explode_brown0","explode_brown1","explode_brown2","explode_brown3","explode_brown4","explode_brown5","explode_brown6","explode_brown7","explode_brown8","explode_blue0","explode_blue1","explode_blue2","explode_blue3","explode_blue4","explode_blue5","explode_blue6","explode_blue7","explode_blue8","explode_purple0","explode_purple1","explode_purple2","explode_purple3","explode_purple4","explode_purple5","explode_purple6","explode_purple7","explode_purple8","explode_red0","explode_red1","explode_red2","explode_red3","explode_red4","explode_red5","explode_red6","explode_red7","explode_red8","explode_darkblue0","explode_darkblue1","explode_darkblue2","explode_darkblue3","explode_darkblue4","explode_darkblue5","explode_darkblue6","explode_darkblue7","explode_darkblue8","zap_magic0","zap_magic1","zap_magic2","zap_magic3","zap_fire0","zap_fire1","zap_fire2","zap_fire3","zap_ice0","zap_ice1","zap_ice2","zap_ice3","zap_sleep0","zap_sleep1","zap_sleep2","zap_sleep3","zap_black0","zap_black1","zap_black2","zap_black3","zap_elec0","zap_elec1","zap_elec2","zap_elec3","zap_gas0","zap_gas1","zap_gas2","zap_gas3","zap_acid0","zap_acid1","zap_acid2","zap_acid3","question1","question2","question3","question4","question5","question6","wall_mine00","wall_mine01","wall_mine02","wall_mine03","wall_mine04","wall_mine05","wall_mine06","wall_mine07","wall_mine08","wall_mine09","wall_mine10","wall_gehennom00","wall_gehennom01","wall_gehennom02","wall_gehennom03","wall_gehennom04","wall_gehennom05","wall_gehennom06","wall_gehennom07","wall_gehennom08","wall_gehennom09","wall_gehennom10","wall_knox00","wall_knox01","wall_knox02","wall_knox03","wall_knox04","wall_knox05","wall_knox06","wall_knox07","wall_knox08","wall_knox09","wall_knox10","wall_sokoban00","wall_sokoban01","wall_sokoban02","wall_sokoban03","wall_sokoban04","wall_sokoban05","wall_sokoban06","wall_sokoban07","wall_sokoban08","wall_sokoban09","wall_sokoban10"]}'),f=s.p+"edfde9e464f7661e223c.png";var v=s(3036),b=s(7692);class y{constructor(){}loadMap(e,t={}){switch(e){case"basic-dungeon":return new v.Z(11,11,t);case"shop":return new b.Z(11,11,t);default:return null}}}const A=new class{constructor(){this.eventHandler=null,this.player=null,this.gameMaps=new Map,this.playerMap=null,this.heroMap=null,this.nextMap=null,this.futureMap=null,this.shopMap=null,this.needsRenderUpdate=!1,this.mapLoader=new y}initTextures(){r.Z.addTexture("sprites",c),r.Z.addTexture("player",d),r.Z.addTexture("scribble",h),r.Z.addTexture("rltiles",_),r.Z.addTexture("webs",m),r.Z.addTexture("map",f),l.Z.addImage("placeholder","sprites",0,0),l.Z.addImage("map","map",0,0,704,704),r.Z.loadJson("rltiles",g),r.Z.loadJson("scribble",p),r.Z.loadJson("webs",u)}handleEvents(){this.processAction(this.eventHandler.handleInput())}processAction(e){if(e&&this.eventHandler.isPlayerTurn){const t=e.perform(A.playerMap);return!(t instanceof n.Z||(t instanceof o.Z?(t.reason&&i.Z.text(t.reason).build(),1):(A.needsRenderUpdate=!0,A.player.fov.compute(A.playerMap,A.player,5),A.player.fov.updateMap(),a.Z.updatePlayerDetails(this.player,this.playerMap),this.handleEnemyTurns(),0)))}}handleEnemyTurns(){this.eventHandler.isPlayerTurn=!1;for(const e of this.heroMap.actors)if(e!==this.player){const t=e.getComponent("ai");t&&t.perform(this.heroMap)}if(this.shopMap)for(const e of this.shopMap.actors)if(e!==this.player){const t=e.getComponent("ai");t&&t.perform(this.shopMap)}if(this.nextMap)for(const e of this.nextMap.actors)if(e!==this.player){const t=e.getComponent("ai");t&&t.perform(this.nextMap)}if(this.futureMap)for(const e of this.futureMap.actors)if(e!==this.player){const t=e.getComponent("ai");t&&t.perform(this.futureMap)}this.eventHandler.isPlayerTurn=!0}clearMaps(){this.player=null,this.gameMaps=new Map}setHeroMap(e){const t=this.heroMap;t!==e&&(this.heroMap=e,this.addMap(e),t&&t.save(),e.save(),this.heroMap.updatePlayerUI(),this.needsRenderUpdate=!0)}setNextMap(e){const t=this.nextMap;t!==e&&(this.nextMap=e,this.addMap(e),t&&t.save(),e.save(),this.nextMap.updatePlayerUI(),this.needsRenderUpdate=!0)}setFutureMap(e){const t=this.futureMap;t!==e&&(this.futureMap=e,this.addMap(e),t&&t.save(),e.save(),this.futureMap.updatePlayerUI(),this.needsRenderUpdate=!0)}setShopMap(e){const t=this.playerMap;t!==e&&(t&&t.removeActor(this.player),this.playerMap=e,this.shopMap=e,this.addMap(e),t&&t.save(),e.save(),this.player&&-1===this.shopMap.actors.indexOf(this.player)&&(this.shopMap.actors.push(this.player),this.player.getComponent("position").moveTo(5,5)),this.shopMap.updatePlayerUI(),this.needsRenderUpdate=!0)}getMap(e){return this.gameMaps.get(e)}addMap(e){this.gameMaps.has(e.name)||this.gameMaps.set(e.name,e)}draw(){this.heroMap.draw(),this.nextMap&&this.nextMap.draw(0,11),this.futureMap&&this.futureMap.draw(11,11),this.shopMap&&this.shopMap.draw(22,0)}save(e){const t=[];for(const e of this.gameMaps.values())t.push(e.save());const s={name:e,date:new Date,playerMap:this.playerMap.name,heroMap:this.heroMap.name,nextMap:this.nextMap.name,shopMap:this.shopMap.name,maps:t};localStorage.setItem(e,JSON.stringify(s))}load(){}isPlayer(e){return e===this.player}},w=A},8052:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s(3622),o=s(9691),i=s(9970);class a extends n.Z{constructor(e){super(e)}perform(e){const t=this.entity.getComponent("position");if(!t)return new o.Z(this.entity,"Entity doesn't have a position.");const s=e.tiles[t.x.get()][t.y.get()];if(s){const t=s.getComponent("interactable");if(t)return t.interact(this.entity,e),new i.Z(this.entity)}return new o.Z(this.entity,"There is nothing to interact with here.")}}},9363:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s(1573),o=s(3622),i=s(3872),a=s(6297);class r extends o.Z{constructor(e){super(e)}perform(e){const t=a.Z.randomInt(-1,1),s=a.Z.randomInt(-1,1);return 0===t&&0===s?new i.Z(this.entity).perform(e):new n.Z(this.entity,t,s).perform(e)}}},1006:(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var n=s(182),o=s(9691),i=s(1573),a=s(2900),r=s(1950);class l extends n.Z{constructor(e,t=0,s=0){super(e,t,s)}perform(e){const t=this.entity.getComponent("position");if(!t)return new o.Z(this.entity,"Entity doesn't have a position.");const s=t.x.get()+this.dx,n=t.y.get()+this.dy,i=e.getCleanableActorAtLocation(s,n);if(!i)return new o.Z(this.entity,"There's nothing to clean there!");{const t=i.getComponent("cleanable");if(t){const s=t.decreasesTo.get();if(s){const t=i.getComponent("position"),n=r.Z.createFromTemplate(s,{components:{position:{x:t.x.get(),y:t.y.get()}}});e.addActor(n)}e.removeActor(i)}}}}var c=s(9970);class d extends n.Z{constructor(e,t=0,s=0){super(e,t,s)}perform(e){const t=this.entity.getComponent("position");if(!t)return new o.Z(this.entity,"Entity doesn't have a position.");const s=t.x.get()+this.dx,n=t.y.get()+this.dy,i=e.tiles[s][n];if(i){const t=i.getComponent("interactable");if(t)return t.interact(this.entity,e),new c.Z(this.entity)}return new o.Z(this.entity,"There is nothing to interact with here.")}}class h extends n.Z{constructor(e,t=0,s=0){super(e,t,s)}perform(e){const t=this.entity.getComponent("position");if(!t)return new o.Z(this.entity,"Entity doesn't have a position.");const s=t.x.get()+this.dx,n=t.y.get()+this.dy;if(e.getBlockingActorAtLocation(s,n))return new a.Z(this.entity,this.dx,this.dy).perform(e);if(e.getCleanableActorAtLocation(s,n))return new l(this.entity,this.dx,this.dy).perform(e);const r=e.tiles[s];if(r){const t=r[n];if(t){const s=t.getComponent("interactable");if(s&&"stairsInteractable"!==s.type&&"trapDoorInteractable"!==s.type)return new d(this.entity,this.dx,this.dy).perform(e)}return new i.Z(this.entity,this.dx,this.dy).perform(e)}return new o.Z(this.entity,"Nowhere to move.")}}},2900:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s(182),o=s(9691),i=s(8680),a=s(3432);class r extends n.Z{constructor(e,t=0,s=0){super(e,t,s)}perform(e){const t=this.entity.getComponent("position");if(!t)return new o.Z(this.entity,"Entity doesn't have a position.");const s=t.x.get()+this.dx,n=t.y.get()+this.dy,r=e.getBlockingActorAtLocation(s,n);if(!r)return new o.Z(this.entity,"There's nothing to attack there!");{const e=this.entity.getComponent("fighter"),t=r.getComponent("fighter");if(e&&t){let s,n,o,l;i.Z.isPlayer(this.entity)?(s="You",n=""):(s=this.entity.name.get(),n="s"),r===i.Z.player?(o="You",l="#C00"):(o=r.name,l="#999");const c=s+" attack"+n+" "+o,d=e.getDamage()-t.getBlockedDamage();d>0?(a.Z.text(c+" for "+d+" hit points.",l).build(),t.takeDamage(d)):a.Z.text(c+", but does no damage.",l).build(),this.entity.callEvent("onMeleeAttack",r)}}}}},1573:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(182),o=s(9691);class i extends n.Z{constructor(e,t=0,s=0){super(e,t,s)}perform(e){const t=this.entity.getComponent("position");if(!t)return new o.Z(this.entity,"Entity doesn't have a position.");const s=t.x.get()+this.dx,n=t.y.get()+this.dy;if(!e.isInBounds(s,n))return new o.Z(this.entity,"Location is outside the map!");const i=this.tryMoveTo(e,s,n);return i instanceof o.Z||t.move(this.dx,this.dy),i}tryMoveTo(e,t,s){if(e.getBlockingActorAtLocation(t,s))return new o.Z(this.entity,"There's something in the way!");const n=e.tiles[t][s];return n&&n.getComponent("blocksMovement")?.blocksMovement.get()?new o.Z(this.entity,"There's a "+n.name+" in the way!"):this}}},182:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s(3622);class o extends n.Z{constructor(e,t=0,s=0){super(e),this.dx=t,this.dy=s}perform(e){console.error("Not Implemented")}}},9436:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var n=s(8926),o=s(5091);class i extends n.Z{constructor(e={}){super(e,"cleanable"),this.decreasesTo=this.addArg(new o.Z("decreasesTo","")),this.increasesTo=this.addArg(new o.Z("increasesTo",""))}perform(){}}},3018:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var n=s(8926),o=s(5091);class i extends o.Z{constructor(e,t){super(e,t??[])}save(e,t){this._value&&(e[t][this._name]=this._value.toString())}load(e){const t=this._defaultValue,s=e[this._name].split(",");for(const e of s)t.push(e);this._value=t}}class a extends n.Z{constructor(e={}){super(e,"faction"),this.factions=this.addArg(new i("factions")),this.enemies=this.addArg(new i("enemies"))}isEnemyOf(e){if(!e)return!1;for(const t of this.factions.get())if(e.enemies.get().indexOf(t)>-1)return!0;return!1}}},4846:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var n=s(8926),o=s(5203),i=s(3432),a=s(8953),r=s(6297),l=s(959),c=s(8680),d=s(5091);class h extends n.Z{constructor(e){super(e,"fighter"),this.baseHp=this.addArg(new d.Z("baseHp",0)),this.hp=this.addArg(new d.Z("hp",null)),this.baseDefense=this.addArg(new d.Z("baseDefense",0)),this.baseDamage=this.addArg(new d.Z("baseDamage",0)),this.minDamage=0,this.maxDamage=0,this.defense=0}setHp(e){this.hp.set(Math.max(0,Math.min(e,this.maxHp))),this.updateUI()}heal(e){if(this.hp.get()===this.maxHp)return 0;const t=Math.min(this.maxHp,this.hp.get()+e),s=t-this.hp.get();return this.setHp(t),s}takeDamage(e){this.setHp(this.hp.get()-e),this.hp.get()<=0&&this.die()}die(){const e=this.parentEntity;c.Z.isPlayer(this.parentEntity)?i.Z.text("You died!","#f00").build():"hero"===this.parentEntity.id.get()?(i.Z.text(e.name.get()+" dies!","#ffa030").build(),i.Z.text("You managed to keep the hero alive for "+c.Z.heroMap.level+" levels!","#ffa030").build()):i.Z.text(e.name.get()+" dies!","#ffa030").build(),e.callEvent("onEntityDeath");const t=e.getComponent("ai");if(t){const s={components:{aiDead:{previousAI:t.type}}};e.removeComponent("ai"),e.setComponent(new o.default(s))}e.sprite.set("rltiles_corpse"),e.name.set("Corpse of "+this.name),this.clearSaveCache()}getDamage(){return this.minDamage===this.maxDamage?this.minDamage:r.Z.randomInt(this.minDamage,this.maxDamage)}getDamageDisplay(){return this.minDamage===this.maxDamage?this.minDamage:this.minDamage+" - "+this.maxDamage}getBlockedDamage(){return Math.floor(r.Z.randomNumber(this.defense/10,this.defense)/10)}getMaxHp(){const e=this.baseHp.get();let t=0;const s=this.parentEntity.getComponent("equipment");if(s){const e=s.getEquippables();for(const s of e)t+=s.health}return e+t}recalculateStats(e=!0){const t=this.getMaxHp();(null===this.hp.get()||this.hp>=this.maxHp)&&this.hp.set(t),this.maxHp=t,this.calculateDamage(),this.calculateDefense(),this.updateUI(),e&&this.clearSaveCache()}calculateDamage(){const e=this.baseDamage.get();let t=0,s=0;const n=this.parentEntity.getComponent("equipment");if(n){const e=n.getEquippables();for(const n of e)t+=n.minDamage,s+=n.maxDamage}this.minDamage=e+t,this.maxDamage=Math.floor(1.5*e)+s}calculateDefense(){const e=this.baseDefense.get();let t=0;const s=this.parentEntity.getComponent("equipment");if(s){const e=s.getEquippables();for(const s of e)t+=s.defense}this.defense=e+t}updateUI(){c.Z.isPlayer(this.parentEntity)?(a.Z.updateHealth(this.hp.get(),this.maxHp),a.Z.updatePower(this.getDamageDisplay()),a.Z.updateDefense(this.defense)):"hero"===this.parentEntity.id.get()&&(l.Z.updateHealth(this.hp.get(),this.maxHp),l.Z.updatePower(this.getDamageDisplay()),l.Z.updateDefense(this.defense))}onComponentsLoaded(){this.recalculateStats(!1)}onEquipmentChange(){this.recalculateStats()}}},5459:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var n=s(8926),o=s(8680),i=s(1763),a=s(5091),r=s(3070);class l extends n.Z{constructor(e={}){super(e,"inventory"),this.capacity=this.addArg(new a.Z("capacity",3)),this.items=this.addArg(new r.Z("items"))}addItem(e){if(!e)return!1;let t=!1;const s=this.items.get();for(let n=0;n<s.length;n++){const o=s[n]?.item;if(o&&(t=this.addPartialStacks(e),t))break}return t||(t=this.addFullStacks(e)),t}addFullStacks(e){this.clearSaveCache();const t=this.items.get();if(-1===this.capacity.get())t.push(e),e.parentEntity=this;else for(let s=0;s<this.capacity.get();s++)if(!t[s])return t[s]=e,e.parentEntity=this,!0;return!1}addPartialStacks(e){if(e.amount<=0)return!1;this.clearSaveCache();const t=e.amount;let s=e.amount;const n=this.items.get();let o;o=-1===this.capacity.get()?n.length:this.capacity.get();for(let t=0;t<o;t++){const o=n[t];if(o&&e.id===o.id){const t=o.maxStackSize-o.amount;if(t>=s)return o.setAmount(o.amount+s),!0;o.setAmount(o.amount+t),e.setAmount(e.amount-t),s-=t}}return t!==s}use(e,t){e.setAmount(e.amount-t),e.amount<=0&&this.remove(e),this.clearSaveCache()}removeByIndex(e){e>-1&&this.items.get().splice(e,1,null),this.clearSaveCache(),o.Z.needsMapUpdate=!0}remove(e){const t=this.items.get().indexOf(e);this.removeByIndex(t)}getItem(e){return this.items.get()[e]}setItem(e,t){this.items.get()[e]=t,this.clearSaveCache()}move(e,t){const s=this.items.get();if(e!==t){const n=s[e];s[e]=s[t],s[t]=n,this.clearSaveCache(),o.Z.isPlayer(this.parentEntity)&&i.Z.populateInventory(o.Z.player)}}drop(){}}},6490:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var n=s(4652),o=s(959),i=s(5386),a=s(7729),r=s(6297),l=s(2900),c=s(9363),d=s(5539),h=s(5986),p=s(1006),m=s(3872),u=s(8052),_=s(5091);class g extends n.default{constructor(e={}){super(e,"aiHero"),this.fov=new a.Z,this.chaseLocation=null,this.radius=this.addArg(new _.Z("radius",10)),this.movementActions=this.addArg(new _.Z("movementActions",1)),this.currentMovement=this.addArg(new _.Z("currentMovement",0)),this.turnsToEnterDungeon=this.addArg(new _.Z("turnsToEnterDungeon",30)),this.status=this.addArg(new _.Z("status","Hero will arrive in "+this.turnsToEnterDungeon.get()+" turns.")),this.updateUIStatus()}decreaseTurnsToEnterDungeon(){this.turnsToEnterDungeon.set(this.turnsToEnterDungeon.get()-1)}setStatus(e){this.status.set(e),this.updateUIStatus()}updateUIStatus(){o.Z.updateStatus(this.status.get())}perform(e){const t=this.parentEntity;if(this.turnsToEnterDungeon.get()>0)this.decreaseTurnsToEnterDungeon(),this.setStatus("Hero will arrive in "+this.turnsToEnterDungeon.get()+" turns.");else if(0===this.turnsToEnterDungeon.get())t.setComponent(new i.default({components:{position:{x:5,y:0}}})),this.decreaseTurnsToEnterDungeon(),this.setStatus("Hero has entered the dungeon!");else{const s=t.getComponent("position");if(s){this.fov.compute(e,s.x.get(),s.y.get(),this.radius.get());const n=this.getClosestEnemy();if(n){const o=n.getComponent("position");if(this.chaseLocation={x:o.x.get(),y:o.y.get()},s.distanceTo(o)<=1)return this.setStatus("Hero is fighting "+n.name+"!"),new l.Z(t,o.x.get()-s.x.get(),o.y.get()-s.y.get()).perform(e);this.setStatus("Hero is moving to attack "+n.name+".")}else{const n=this.getClosestStairs();if(n){const o=n.getComponent("position");if(this.chaseLocation={x:o.x.get(),y:o.y.get()},s.distanceTo(o)<=0)return this.setStatus("Hero is climbing down the stairs!"),new u.Z(t).perform(e);this.setStatus("Hero is moving towards the stairs!")}if(null!==this.chaseLocation&&s.isAt(this.chaseLocation.x,this.chaseLocation.y)&&(this.chaseLocation=null),null===this.chaseLocation)return this.setStatus("Hero is wandering aimlessly."),new c.Z(t).perform(e)}return this.moveTowards(e)}}}getClosestEnemy(){const e=this.parentEntity,t=e.getComponent("position");let s=[],n=null;const o=e.getComponent("faction");if(o)for(const e of this.fov.visibleActors)if(e.isAlive()){const i=e.getComponent("faction");if(o.isEnemyOf(i)){const o=e.getComponent("position");if(o){const i=t.distanceTo(o);null===n||i<n?(s=[],s.push(e),n=i):i===n&&s.push(e)}}}return 1===s.length?s[0]:s.length>1?s[r.Z.randomInt(0,s.length-1)]:null}getClosestStairs(){const e=this.parentEntity.getComponent("position");let t=[],s=null;for(const n of this.fov.visibleTiles){const o=n.getComponent("interactable");if(o&&"stairsInteractable"===o.type){const o=n.getComponent("position");if(o){const i=e.distanceTo(o);null===s||i<s?(t=[],t.push(n),s=i):i===s&&t.push(n)}}}return 1===t.length?t[0]:t.length>1?t[r.Z.randomInt(0,t.length-1)]:null}moveTowards(e){const t=this.parentEntity,s=t.getComponent("position");if(this.currentMovement.set(this.movementActions.get()),this.currentMovement.get()>=1){const n=this.fov.right-this.fov.left,o=this.fov.bottom-this.fov.top,i=Array(n).fill().map((()=>Array(o).fill(0)));for(let t=this.fov.left;t<this.fov.right;t++)for(let s=this.fov.top;s<this.fov.bottom;s++){const n=e.tiles[t][s];if(n){if(n.getComponent("blocksMovement")?.blocksMovement.get())continue;i[t-this.fov.left][s-this.fov.top]+=10}}for(const e of this.fov.visibleActors)if(e.isAlive()){const t=e.getComponent("position");t&&(i[t.x.get()-this.fov.left][t.y.get()-this.fov.top]+=100)}const a=new d.Z(i,{diagonal:!0}),r=a.grid[s.x.get()-this.fov.left][s.y.get()-this.fov.top],l=a.grid[this.chaseLocation.x-this.fov.left][this.chaseLocation.y-this.fov.top],c=h.Z.search(a,r,l);let u;for(;this.currentMovement.get()>=1;){if(c&&c.length>0){const n=c.shift();n&&(u=new p.Z(t,n.x+this.fov.left-s.x.get(),n.y+this.fov.top-s.y.get()).perform(e))}else u=new m.Z(t).perform(e);this.currentMovement.set(this.currentMovement.get()-1)}return u}}}},3606:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var n=s(4652),o=s(7729),i=s(9363),a=s(2900),r=s(5986),l=s(5539),c=s(3872),d=s(1006),h=s(6297),p=s(5091);class m extends n.default{constructor(e={}){super(e,"aiMeleeChase"),this.fov=new o.Z,this.chaseLocation=null,this.radius=this.addArg(new p.Z("radius",5)),this.movementActions=this.addArg(new p.Z("movementActions",1)),this.currentMovement=this.addArg(new p.Z("currentMovement",0))}perform(e){const t=this.parentEntity,s=t.getComponent("position");if(s){this.fov.compute(e,s.x.get(),s.y.get(),this.radius.get());let n=[],o=null;const p=t.getComponent("faction");if(p)for(const e of this.fov.visibleActors)if(e.isAlive()){const t=e.getComponent("faction");if(p.isEnemyOf(t)){const t=e.getComponent("position");if(t){const i=t.distanceTo(s);null===o||i<o?(n=[],n.push(e),o=i):i===o&&n.push(e)}}}let m;if(1===n.length?m=n[0]:n.length>1&&(m=n[h.Z.randomInt(0,n.length-1)]),m){const n=m.getComponent("position");if(this.chaseLocation={x:n.x.get(),y:n.y.get()},o<=1)return new a.Z(t,n.x.get()-s.x.get(),n.y.get()-s.y.get()).perform(e)}else if(null!==this.chaseLocation&&s.isAt(this.chaseLocation.x,this.chaseLocation.y)&&(this.chaseLocation=null),null===this.chaseLocation)return new i.Z(t).perform(e);if(this.currentMovement.set(this.currentMovement.get()+this.movementActions.get()),this.currentMovement.get()>=1){const n=this.fov.right-this.fov.left,o=this.fov.bottom-this.fov.top,i=Array(n).fill().map((()=>Array(o).fill(0)));for(let t=this.fov.left;t<this.fov.right;t++)for(let s=this.fov.top;s<this.fov.bottom;s++){const n=e.tiles[t][s];if(n){if(n.getComponent("blocksMovement")?.blocksMovement.get())continue;i[t-this.fov.left][s-this.fov.top]+=10}}for(const e of this.fov.visibleActors)if(e.isAlive()){const t=e.getComponent("position");t&&(i[t.x.get()-this.fov.left][t.y.get()-this.fov.top]+=100)}const a=new l.Z(i,{diagonal:!0}),h=a.grid[s.x.get()-this.fov.left][s.y.get()-this.fov.top],p=a.grid[this.chaseLocation.x-this.fov.left][this.chaseLocation.y-this.fov.top],m=r.Z.search(a,h,p);let u;for(;this.currentMovement.get()>=1;){if(m&&m.length>0){const n=m.shift();n&&(u=new d.Z(t,n.x+this.fov.left-s.x,n.y+this.fov.top-s.y).perform(e))}else u=new c.Z(t).perform(e);this.currentMovement.set(this.currentMovement.get()-1)}return u}}}}},9900:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var n=s(7950),o=s(9691),i=s(3432),a=s(5091);class r extends n.default{constructor(e={}){super(e,"healingConsumable"),this.amount=this.addArg(new a.Z("amount",0))}activate(e){const t=e.entity.getComponent("fighter");if(t){const s=t.heal(this.amount.get());return s>0?(this.consume(),this.isPlayer()&&i.Z.text("You consume the "+this.parentEntity.name.get()+", and recover "+s+" HP!").build(),this):new o.Z(e.entity,"Your health is already full")}}getDescription(){return"<span class='item__details-line'>Recovers <span style='color: #c00;'>"+this.amount.get()+"</span> health</span>"}}},7950:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var n=s(8926),o=s(3622);class i extends o.Z{constructor(e,t,s,n){super(e),this.item=t,this.x=s,this.y=n}perform(e){const t=this.item.getComponent("consumable");if(t)return t.activate(this,this.x,this.y)}getTargetActor(e){return e.getAliveActorAtLocation(this.x,this.y)}}class a extends n.Z{constructor(e={},t){super(e,"consumable",t)}save(){return super.save()}getConsumer(){let e=this.parentEntity;for(;e&&"actor"!==e.type;)e=e.parentEntity;return e}getItem(){return this.parentEntity}getAction(){return new i(this.getConsumer(),this.getItem())}activate(e){console.error("Not Implemented")}consume(){const e=this.getItem(),t=e.parentEntity;t&&t.use(e,1)}}},5585:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var n=s(8926),o=s(5251),i=s(1406),a=s(1950),r=s(8680),l=s(842),c=s(1763);class d extends n.Z{constructor(e={}){if(super(e,"equipment"),this.items=[],this.items.push(new i.default(o.default.SHOULDER)),this.items.push(new i.default(o.default.HELMET)),this.items.push(new i.default(o.default.AMULET)),this.items.push(new i.default(o.default.MAIN_HAND)),this.items.push(new i.default(o.default.BODY)),this.items.push(new i.default(o.default.OFF_HAND)),this.items.push(new i.default(o.default.RING)),this.items.push(new i.default(o.default.BELT)),this.items.push(new i.default(o.default.RING)),this.items.push(new i.default(o.default.STORAGE)),this.items.push(new i.default(o.default.BOOTS)),this.items.push(new i.default(o.default.GLOVES)),this.hasComponent()){const t=e.components.equipment;if(void 0!==t.items)for(let e=0;e<t.items.length;e++){const s=t.items[e];null!==s&&(void 0!==s.load?this.items[e].item=a.Z.createFromTemplate(s.load,s):this.items[e].item=a.Z.create(s),this.items[e].item.parentEntity=this)}}}save(){if(this.cachedSave)return this.cachedSave;const e=[];for(const t of this.items){const s=t.item;s?e.push(JSON.stringify(s.save())):e.push(null)}const t={equipment:{items:e}};return this.cachedSave=t,t}getEquippables(){const e=[];for(const t of this.items){const s=t.item;if(s){const t=s.getComponent("equippable");t&&e.push(t)}}return e}move(e,t){if(e!==t){const s=this.items[e].item;this.items[e].item=this.items[t].item,this.items[t].item=s,this.clearSaveCache()}}dropAll(){for(const e of this.items)e.item&&this.drop(e.item);const e=this.gold;if(e>0){const t=a.Z.createFromTemplate("gold");t.amount=e,this.drop(t)}this.clearSaveCache()}drop(e){if(e){const t=this.parentEntity.getComponent("position");r.Z.gameMap.addItem(e,t),r.Z.isPlayer(this.parentEntity)&&l.Z.text("You dropped the "+e.name).build(),this.remove(e),this.clearSaveCache(),r.Z.isPlayer(this.parentEntity)&&c.Z.populateInventory(r.Z.player)}}remove(e){for(let t=0;t<this.items.length;t++){const s=this.items[t];if(s&&s.item===e){s.item=null,this.clearSaveCache(),r.Z.needsMapUpdate=!0;break}}}addItem(e){const t=this.items[7].item,s=this.items[9].item;let n=!1;if(t&&(n=t.getComponent("equippable").addPartialStacks(e)),!n&&s&&(n=s.getComponent("equippable").addPartialStacks(e)),!n)for(let e=0;e<this.items.length;e++){if(7===e||9===e)continue;const t=this.items[e].item;if(t&&(n=t.getComponent("equippable").addPartialStacks(t),n))break}return!n&&s&&(n=s.getComponent("equippable").addFullStacks(e)),n}setItem(e,t){this.items[e].item=t,this.clearSaveCache()}getItem(e){return this.items[e].item}onEntityDeath(){this.dropAll()}}},1406:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});class n{constructor(e,t){this.slot=e,this.item=t}}},5251:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});const n=Object.freeze({MAIN_HAND:"mainhand",OFF_HAND:"offhand",BODY:"body",HELMET:"helmet",GLOVES:"gloves",SHOULDER:"shoulder",BELT:"belt",BOOTS:"boots",STORAGE:"storage",AMULET:"amulet",RING:"ring"})},9660:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var n=s(8926),o=s(5251),i=s(8680),a=s(842),r=s(1763),l=s(5091),c=s(3070),d=s(6297);class h extends l.Z{constructor(e,t){super(e,t)}load(e){this._value=this.parseRandIntBetween(e[this._name])}parseRandIntBetween(e){if("string"==typeof e){const t=e.trim().split("-");return t.length>1?d.Z.randomInt(parseInt(t[0].trim()),parseInt(t[1].trim())):parseInt(t[0].trim())}return e}}class p extends h{constructor(e,t){super(e,t),this.min=this._defaultValue,this.max=this._defaultValue}save(e,t){this.min===this.max?this.min!==this._defaultValue&&(e[t]=this.min):e[t]=this.min+","+this.max}load(e){const t=e[this._name];if(t)if("string"==typeof t){const e=t.split(",");this.min=this.parseRandIntBetween(e[0]),e.length>1?this.max=this.parseRandIntBetween(e[1]):this.max=this.min}else this.min=t,this.max=this.min;this.min=this.min??this._defaultValue,this.max=this.max??this.min}}class m extends n.Z{constructor(e={}){super(e,"equippable"),this.slot=this.addArg(new l.Z("slot",o.default.MAIN_HAND)),this.damage=this.addArg(new p("damage",0)),this.defense=this.addArg(new h("defense",0)),this.health=this.addArg(new h("health",0)),this.maxStorage=this.addArg(new h("maxStorage",0)),this.storage=this.addArg(new c.Z("storage"))}getDescription(){let e="<span class='item__details-line'>Type: <span style='color: #fff;'>"+this.slot.get()+"</span></span>";return 0===this.damage.min&&0===this.damage.max||(e+="<span class='item__details-line'>Damage: <span style='color: #f00;'>",this.damage.min===this.damage.max?e+=this.damage.min:e+=this.damage.min+" - "+this.damage.max,e+="</span></span>"),0!==this.defense.get()&&(e+="<span class='item__details-line'>Defense: <span style='color: #fff;'>"+this.defense.get()+"</span></span>"),0!==this.health.get()&&(e+="<span class='item__details-line'>Health: <span style='color: #fff;'>+"+this.health.get()+"</span></span>"),-1===this.maxStorage.get()?e+="<span class='item__details-line'>Storage: <span style='color: #fff;'>Unlimited</span></span>":this.maxStorage.get()>0&&(e+="<span class='item__details-line'>Storage: <span style='color: #fff;'>"+this.maxStorage.get()+"</span></span>"),e}addFullStacks(e){this.clearSaveCache();const t=this.storage.get();if(-1===this.maxStorage.get())t.push(e),e.parentEntity=this;else for(let s=0;s<this.maxStorage.get();s++)if(!t[s])return t[s]=e,e.parentEntity=this,!0;return!1}addPartialStacks(e){if(e.amount<=0)return!1;this.clearSaveCache();const t=e.amount;let s=e.amount;const n=this.storage.get();let o;o=-1===this.maxStorage.get()?n.length:this.maxStorage.get();for(let t=0;t<o;t++){const o=n[t];if(o&&e.id===o.id){const t=o.maxStackSize-o.amount;if(t>=s)return o.setAmount(o.amount+s),!0;o.setAmount(o.amount+t),e.setAmount(e.amount-t),s-=t}}return t!==s}use(e,t){e.setAmount(e.amount-t),e.amount<=0&&this.remove(e),this.clearSaveCache()}removeByIndex(e){e>-1&&this.storage.get().splice(e,1,null),this.clearSaveCache(),i.Z.needsMapUpdate=!0}remove(e){const t=this.storage.get().indexOf(e);this.removeByIndex(t)}getItem(e){return this.storage.get()[e]}setItem(e,t){this.storage.get()[e]=t,this.clearSaveCache()}move(e,t){const s=this.storage.get();if(e!==t){const n=s[e];s[e]=s[t],s[t]=n,this.clearSaveCache(),i.Z.isPlayer(this.parentEntity)&&r.Z.populateInventory(i.Z.player)}}drop(e){if(e){let t=this.parentEntity;for(;"actor"!==t.type;)t=t.parentEntity;const s=t.getComponent("position");i.Z.gameMap.addItem(e,s),t===i.Z.player&&a.Z.text("You dropped the "+e.name).build(),this.remove(e),this.clearSaveCache(),t===i.Z.player&&r.Z.populateInventory(i.Z.player)}}}},3978:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var n=s(9589),o=s(8680),i=s(2122),a=s(7493),r=s(6463);class l extends i.Z{constructor(e,t){super(e),this.title=t||"<missing title>"}render(e,t){a.Z.setTitle(this.title),a.Z.open(e,t)}setOptions(e,t){a.Z.setOptions(e,t)}handleInput(){return super.handleInput(),r.Z.testPressed("up")?a.Z.moveActiveUp():r.Z.testPressed("down")?a.Z.moveActiveDown():r.Z.testPressed("left")||r.Z.testPressed("right")?a.Z.moveActiveLeftRight():r.Z.testPressed("confirm")&&this.selectIndex(a.Z.getLeftActiveIndex(),a.Z.getRightActiveIndex()),null}selectIndex(){}exit(){a.Z.close(),super.exit()}}class c extends l{constructor(e,t,s,n,o){super(t,s),this.callback=e,this.entityInteracted=n,this.lootableInteractable=o,this.updateTradeOptions()}updateTradeOptions(){const e=this.entityInteracted.getComponent("inventory"),t=[],s=e.items.get();for(const e of s)t.push(e);for(;t.length<e.capacity.get();)t.push(null);const n=[],o=this.lootableInteractable.items.get();for(const e of o)n.push(e);for(;n.length<this.lootableInteractable.capacity.get();)n.push(null);a.Z.setOptions(t,n)}selectIndex(e,t){const s=this.entityInteracted.getComponent("inventory");if(e>-1){const t=s.getItem(e);this.lootableInteractable.addItem(t)&&s.removeByIndex(e),this.updateTradeOptions()}else if(t>-1){const e=this.lootableInteractable.getItem(t);s.addItem(e)&&this.lootableInteractable.removeByIndex(t),this.updateTradeOptions()}}}var d=s(3872),h=s(1763),p=s(5091),m=s(3070),u=s(1470);class _ extends n.default{constructor(e={}){super(e,"lootableInteractable"),this.isLooted=this.addArg(new p.Z("isLooted",!0)),this.isOpen=this.addArg(new p.Z("isOpen",!0)),this.capacity=this.addArg(new p.Z("capacity",1)),this.openSprite=this.addArg(new p.Z("openSprite","")),this.closedSprite=this.addArg(new p.Z("closedSprite","")),this.items=this.addArg(new m.Z("items"))}interact(e){if(o.Z.isPlayer(e)){o.Z.eventHandler=new c((function(){return new d.Z}),o.Z.eventHandler,"Viewing "+this.parentEntity.name.get()+"'s Contents",e,this);const t=e.getComponent("position");o.Z.eventHandler.render(64*t.x.get()*u.Z.scale+100,64*t.y.get()*u.Z.scale)}else this.parentEntity.id.get()}addItem(e){if(!e)return!1;let t=!1;const s=this.items.get();for(let n=0;n<s.length;n++){const o=s[n]?.item;if(o&&(t=this.addPartialStacks(e),t))break}return t||(t=this.addFullStacks(e)),t}addFullStacks(e){this.clearSaveCache();const t=this.items.get();if(-1===this.capacity.get())t.push(e),e.parentEntity=this;else for(let s=0;s<this.capacity.get();s++)if(!t[s])return t[s]=e,e.parentEntity=this,!0;return!1}addPartialStacks(e){if(e.amount<=0)return!1;this.clearSaveCache();const t=e.amount;let s=e.amount;const n=this.items.get();let o;o=-1===this.capacity.get()?n.length:this.capacity.get();for(let t=0;t<o;t++){const o=n[t];if(o&&e.id===o.id){const t=o.maxStackSize-o.amount;if(t>=s)return o.setAmount(o.amount+s),!0;o.setAmount(o.amount+t),e.setAmount(e.amount-t),s-=t}}return t!==s}use(e,t){e.setAmount(e.amount-t),e.amount<=0&&this.remove(e),this.clearSaveCache()}removeByIndex(e){e>-1&&this.items.get().splice(e,1,null),this.clearSaveCache(),o.Z.needsMapUpdate=!0}remove(e){const t=this.items.get().indexOf(e);this.removeByIndex(t)}getItem(e){return this.items.get()[e]}setItem(e,t){this.items.get()[e]=t,this.clearSaveCache()}move(e,t){const s=this.items.get();if(e!==t){const n=s[e];s[e]=s[t],s[t]=n,this.clearSaveCache(),o.Z.isPlayer(this.parentEntity)&&h.Z.populateInventory(o.Z.player)}}drop(){}}},7853:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var n=s(9589),o=s(8680),i=s(2122),a=s(7839),r=s(6463);class l extends i.Z{constructor(e,t,s){super(e),this.title=t||"<missing title>",this.options=s||[]}render(e,t){a.Z.setTitle(this.title),a.Z.setOptions(this.options),a.Z.open(e,t)}handleInput(){return super.handleInput(),r.Z.testPressed("up")?a.Z.moveActiveUp():r.Z.testPressed("down")?a.Z.moveActiveDown():r.Z.testPressed("confirm")&&this.selectIndex(a.Z.getActiveIndex()),null}selectIndex(){}exit(){a.Z.close(),super.exit()}}class c extends l{constructor(e,t){super(t,"Peek or go down stairs?",["Peek down","Go down"]),this.callback=e}selectIndex(e){o.Z.processAction(this.callback(e)),this.exit()}}var d=s(3872),h=s(3036),p=s(3432),m=s(5091),u=s(1470);class _ extends n.default{constructor(e={}){super(e,"stairsInteractable"),this.map=this.addArg(new m.Z("map",null)),this.x=this.addArg(new m.Z("x",null)),this.y=this.addArg(new m.Z("y",null)),this.generator=this.addArg(new m.Z("generator",null))}setPosition(e,t){this.x.set(e),this.y.set(t)}setMap(e){this.map.set(e)}setGenerator(e){this.generator.set(e)}interact(e,t){if(o.Z.isPlayer(e)){const s=t.level,n=o.Z.nextMap.level,i=o.Z.futureMap.level;let a,r=!1;if(s<n?a=o.Z.nextMap:s<i&&(a=o.Z.futureMap,r=!0),a.explored){if(a.explored=!0,o.Z.needsRenderUpdate=!0,a.addActor(o.Z.player),t.removeActor(o.Z.player),o.Z.playerMap=a,o.Z.player.getComponent("position").moveTo(5,0),r){o.Z.setNextMap(o.Z.futureMap);const e=new h.Z(11,11,{level:i+1});o.Z.setFutureMap(e),e.create()}return new d.Z}{o.Z.eventHandler=new c((function(e){if(a.explored=!0,o.Z.needsRenderUpdate=!0,0===e)return new d.Z;if(r){o.Z.setNextMap(o.Z.futureMap);const e=new h.Z(11,11,{level:i+1});o.Z.setFutureMap(e),e.create()}return a.addActor(o.Z.player),t.removeActor(o.Z.player),o.Z.playerMap=a,o.Z.player.getComponent("position").moveTo(5,0),new d.Z}),o.Z.eventHandler);const s=e.getComponent("position");o.Z.eventHandler.render(64*s.x.get()*u.Z.scale+100,64*s.y.get()*u.Z.scale)}}else{const s=t.level+1,n=(this.generator.get()||this.map.get())+"-"+s.toString(),i=o.Z.getMap(n);if(!i||s>o.Z.playerMap.level)p.Z.text("The hero has gotten too far ahead.").build();else if(t.removeActor(e),o.Z.heroMap=i,i.explored=!0,o.Z.needsRenderUpdate=!0,i.addActor(e),e.getComponent("position").moveTo(5,0),i===o.Z.nextMap){o.Z.nextMap=o.Z.futureMap;const e=new h.Z(11,11,{level:o.Z.futureMap.level+1});o.Z.setFutureMap(e),e.create()}}}}},1429:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var n=s(9589),o=s(8680),i=s(5091);class a extends n.default{constructor(e={}){super(e,"trapDoorInteractable"),this.map=this.addArg(new i.Z("map",null)),this.x=this.addArg(new i.Z("x",null)),this.y=this.addArg(new i.Z("y",null)),this.generator=this.addArg(new i.Z("generator",null))}setPosition(e,t){this.x.set(e),this.y.set(t)}setMap(e){this.map.set(e)}setGenerator(e){this.generator.set(e)}interact(e,t){if(this.map.get());else if(this.generator.get()){const e={};t.level&&(e.level=t.level);const s=o.Z.mapLoader.loadMap(this.generator.get(),e);s.create(),s.explored=!0,o.Z.setShopMap(s,this),this.setMap(s.name),this.setGenerator(null)}}}},2904:(e,t,s)=>{var n={"./Cleanable.js":9436,"./Faction.js":3018,"./Fighter.js":4846,"./Inventory.js":5459,"./ai/AIHero.js":6490,"./ai/AIMeleeChase.js":3606,"./consumable/HealingConsumable.js":9900,"./consumable/_Consumable.js":7950,"./equipment/Equipment.js":5585,"./equipment/EquipmentSlot.js":1406,"./equipment/EquipmentType.js":5251,"./equipment/Equippable.js":9660,"./interactable/LootableInteractable.js":3978,"./interactable/StairsInteractable.js":7853,"./interactable/TrapDoorInteractable.js":1429};function o(e){return i(e).then(s)}function i(e){return Promise.resolve().then((()=>{if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}))}o.keys=()=>Object.keys(n),o.resolve=i,o.id=2904,e.exports=o},1450:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(7729),o=s(5234);class i extends o.Z{constructor(e={}){e.type="actor",super(e),this.fov=new n.Z}clone(){return new i(this.save())}isAlive(){const e=this.getComponent("fighter");return e&&e.hp.get()>0}}},2122:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s(3918),o=s(8680),i=s(6463);class a extends n.Z{constructor(e){super(),this.previousHandler=e}handleInput(){return i.Z.testPressed("escape")&&this.exit(),null}onLeftClick(){this.exit()}exit(){o.Z.eventHandler=this.previousHandler}}},3036:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s(8621),o=s(1950),i=s(6297),a=s(4433);class r extends n.Z{constructor(e,t,s={}){const n=s.level||1;super("basic-dungeon-"+n,"Dungeon Level "+n,e,t),this.maxRooms=s.maxRooms||1,this.roomMinSize=s.roomMinSize||8,this.roomMaxSize=s.roomMaxSize||8,this.level=n,this.minTilesByFloor=[{level:1,amount:2},{level:4,amount:3},{level:7,amount:4}],this.maxTilesByFloor=[{level:1,amount:4},{level:4,amount:6},{level:7,amount:8}],this.minMonstersByFloor=[{level:1,amount:0},{level:4,amount:1},{level:7,amount:2}],this.maxMonstersByFloor=[{level:1,amount:2},{level:4,amount:3},{level:7,amount:4}],this.minItemsByFloor=[{level:1,amount:0},{level:4,amount:1},{level:6,amount:2}],this.maxItemsByFloor=[{level:1,amount:2},{level:4,amount:3},{level:6,amount:5}]}getFloorAmount(e){let t=0;for(const s of e){if(s.level>this.level)break;t=s.amount}return t}save(){const e=super.save();return 1!==this.level&&(e.level=this.level),this.saveCache=e,e}create(e,t){super.create();const s=o.Z.createFromTemplate("wall",{components:{position:{x:0,y:0}}});for(let e=0;e<this.height;e++)for(let t=0;t<this.width;t++){const n=s.clone();n.getComponent("position").moveTo(t,e),this.tiles[t][e]=n}const n=[];for(let e=0;e<this.maxRooms;e++){const s=i.Z.randomInt(this.roomMinSize,this.roomMaxSize),r=i.Z.randomInt(this.roomMinSize,this.roomMaxSize);let l=10*e+1,c=1;e>=this.maxRooms/2&&(c=11,l-=30);const d=new a.Z(l,c,s,r);let h=!1;for(const e of n)if(d.intersects(e)){h=!0;break}if(!h){if(d.createRoom(this),0===n.length){const e=d.getCenterX();t&&t.setPosition(e,0),this.tiles[e][0]=o.Z.createFromTemplate("stairs_up",{components:{position:{x:e,y:0}}});const s=i.Z.randomInt(d.x1+2,d.x2-2),n=i.Z.randomInt(d.y1+2,d.y2-2);this.tiles[s][n]=o.Z.createFromTemplate("stairs_down",{components:{position:{x:s,y:n},stairsInteractable:{generator:"basic-dungeon"}}});let a=s,r=n;for(;a===s&&r===n;)a=i.Z.randomInt(d.x1+2,d.x2-2),r=i.Z.randomInt(d.y1+2,d.y2-2),a===s&&r===n||(this.tiles[a][r]=o.Z.createFromTemplate("trap_door",{components:{position:{x:a,y:r},trapDoorInteractable:{generator:"shop"}}}))}n.push(d)}}for(const e of n)e.placeTiles(this,"basic-dungeon",this.level,this.getFloorAmount(this.minTilesByFloor),this.getFloorAmount(this.maxTilesByFloor)),e.placeEntities(this,"basic-dungeon",this.level,this.getFloorAmount(this.minMonstersByFloor),this.getFloorAmount(this.maxMonstersByFloor)),e.placeItems(this,"basic-dungeon",this.level,this.getFloorAmount(this.minItemsByFloor),this.getFloorAmount(this.maxItemsByFloor))}}},8621:(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});class n{constructor(){}static create2dArray(e){const t=[];for(let s=0;s<e;s++)t[s]=[];return t}}var o=s(1950),i=s(1470),a=s(8680),r=s(29),l=s(1450),c=s(7619),d=s(7156),h=s(550);class p{constructor(e,t,s,n){this.name=e,this.displayName=t,this.width=s,this.height=n,this.timeout=null,this.saveCache=null,this.explored=!1,this.init()}init(){this.tiles=n.create2dArray(this.width),this.actors=[],this.items=[]}create(){}teardown(){this.timeout&&clearTimeout(this.timeout),a.Z.player.fov.teardown();for(let e=0;e<this.width;e++)for(let t=0;t<this.height;t++){const s=this.tiles[e][t];s&&s.callEvent("onMapTeardown")}for(const e of this.actors)e.callEvent("onMapTeardown");for(const e of this.items)e.callEvent("onMapTeardown")}removeEntity(e){e instanceof l.Z?this.removeActor(e):e instanceof c.Z&&this.removeItem(e)}removeItem(e){const t=this.items.indexOf(e);t>-1&&this.items.splice(t,1)}addItem(e,t){const s=e.getComponent("position");t||(t=s);let n=e.amount;for(const o of this.items)if(o.id===e.id){const i=o.getComponent("position");if(i&&t.isEqual(i)){if(-1===o.maxStackSize)return o.setAmount(o.amount+e.amount),s.teardown(),!1;const t=o.maxStackSize-o.amount;if(t>=n)return o.setAmount(o.amount+n),s.teardown(),!1;o.setAmount(o.amount+t),e.setAmount(e.amount-t),n-=t}}return n>0?(e.setAmount(n),s.moveTo(t.x.get(),t.y.get()),e.parent=null,this.items.push(e),s.setVisible(),!0):(s.teardown(),!1)}removeActor(e){const t=this.actors.indexOf(e);t>-1&&this.actors.splice(t,1)}addActor(e){this.actors.push(e)}save(){const e={name:this.name,displayName:this.displayName,width:this.width,height:this.height,explored:this.explored,tiles:{}},t=[],s=[];let n="",o=65;for(let e=0;e<this.width;e++)for(let i=0;i<this.height;i++){const a=this.tiles[e][i];if(a){const e=JSON.stringify(a.save()),i=t.indexOf(e);i>-1?n+=s[i]:(t.push(e),s.push(String.fromCharCode(o)),n+=String.fromCharCode(o),o++)}else n+=" "}e.tiles={},e.tiles.key=n,e.tiles.map={};for(let n=0;n<t.length;n++)e.tiles.map[s[n]]=t[n];const i=[];for(const e of this.actors)i.push(JSON.stringify(e.save()));e.actors=i;const a=[];for(const e of this.items)a.push(JSON.stringify(e.save()));return e.items=a,this.saveCache=e,e}load(e){const t=e.tiles;this.explored=e.explored,this.displayName=e.displayName;for(let e=0;e<this.width;e++)for(let s=0;s<this.height;s++){const n=t[e*this.height+s];n&&(t[e][s]=o.Z.create(n,{components:{position:{x:e,y:s}}}))}const s=e.actors;for(const e of s){const t=o.Z.create(e);this.addActor(t)}const n=e.items;for(const e of n){const t=o.Z.create(e);this.items.push(t)}}isInBounds(e,t){return 0<=e&&e<this.width&&0<=t&&t<this.height}revealFromPosition(e,t,s,n=25){const o=this,i=Math.max(0,e-s),a=Math.min(this.width,e+s),r=Math.max(0,t-s),l=Math.min(this.height,t+s);0===n?o._revealGradually(i,a,r,l,e,t,1,s,n):o.timeout=setTimeout((function(){o._revealGradually(i,a,r,l,e,t,1,s,n)}),n)}_revealGradually(e,t,s,n,o,i,r,l,c){const d=this;d.timeout=null,r<=l&&(d.timeout=setTimeout((function(){d._revealGradually(e,t,s,n,o,i,r+1,l,c)}),c));const h=o-r,p=o+r,m=i-r,u=i+r;for(let e=h;e<=p;e++){const t=e===h||e===p;for(let s=m;s<=u;s++)(t||s===m||s===u)&&(this._revealAtPosition(e,s),a.Z.needsMapUpdate=!0)}return!0}_revealAtPosition(e,t){if(this.tiles[1][e]){const s=this.tiles[1][e][t];s&&s.getComponent("position")&&(s.getComponent("fov")||s.setComponent(new r.default({components:{fov:{explored:!0,visible:!1}}})))}}getAliveActorAtLocation(e,t){let s=null;for(const n of this.actors)if(n.isAlive()){const o=n.getComponent("position");if(o&&o.isAt(e,t)){s=n;break}}return s}getBlockingActorAtLocation(e,t){let s=null;for(const n of this.actors){const o=n.getComponent("position");if(o&&o.isAt(e,t)&&n.getComponent("blocksMovement")?.blocksMovement.get()){s=n;break}}return s}getCleanableActorAtLocation(e,t){let s=null;for(const n of this.actors){const o=n.getComponent("position");if(o&&o.isAt(e,t)&&n.getComponent("cleanable")){s=n;break}}return s}addPlayer(e,t){a.Z.player||(a.Z.player=o.Z.createFromTemplate("player")),this.addActor(a.Z.player),a.Z.player.getComponent("position").moveTo(e,t),this.updatePlayerUI()}updatePlayerUI(){d.Z.updatePlayerDetails()}draw(e=0,t=0){if(this.explored){const s=this.tiles;for(let n=0;n<s.length;n++){const o=s[n];for(let s=0;s<o.length;s++){const n=o[s];n&&n.draw(e,t)}}for(const s of this.items)s.draw(e,t);for(const s of this.actors)s.draw(e,t)}else h.Z.getImage("map").drawImage(i.Z.ctx,64*e,64*t);i.Z.ctx.font="20vh serif",i.Z.ctx.textAlign="center",i.Z.ctx.globalAlpha=.1;let s=this.level;this.name.startsWith("shop")&&(s="$ "+s),i.Z.ctx.fillText(s,(64*e+352)*i.Z.scale,(64*t+444)*i.Z.scale),i.Z.ctx.globalAlpha=1}}},7692:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var n=s(8621),o=s(1950),i=s(6297),a=s(4433);class r extends n.Z{constructor(e,t,s={}){const n=s.level||1;super("shop-"+n,"Shop",e,t),this.maxRooms=s.maxRooms||1,this.roomMinSize=s.roomMinSize||8,this.roomMaxSize=s.roomMaxSize||8,this.level=n,this.minMonstersByFloor=[{level:1,amount:2}],this.maxMonstersByFloor=[{level:1,amount:2}],this.minItemsByFloor=[{level:1,amount:2}],this.maxItemsByFloor=[{level:1,amount:2}]}getFloorAmount(e){let t=0;for(const s of e){if(s.level>this.level)break;t=s.amount}return t}save(){const e=super.save();return 1!==this.level&&(e.level=this.level),this.saveCache=e,e}create(e,t){super.create();const s=o.Z.createFromTemplate("wall",{components:{position:{x:0,y:0}}});for(let e=0;e<this.height;e++)for(let t=0;t<this.width;t++){const n=s.clone();n.getComponent("position").moveTo(t,e),this.tiles[t][e]=n}const n=[];for(let e=0;e<this.maxRooms;e++){const e=i.Z.randomInt(this.roomMinSize,this.roomMaxSize),s=i.Z.randomInt(this.roomMinSize,this.roomMaxSize),r=new a.Z(1,1,e,s);if(r.createRoom(this),0===n.length){const e=r.getCenterX(),s=r.getCenterY();t&&t.setPosition(e,s),this.tiles[e][s]=o.Z.createFromTemplate("stairs_down",{components:{position:{x:e,y:s},stairsInteractable:{generator:"basic-dungeon"}}});for(let e=r.x1+2;e<r.x2-1;e++)this.tiles[e][3]=o.Z.createFromTemplate("table",{components:{position:{x:e,y:3}}}),this.tiles[e][7]=o.Z.createFromTemplate("table",{components:{position:{x:e,y:7}}})}n.push(r)}}}},4433:(e,t,s)=>{"use strict";s.d(t,{Z:()=>p});class n{constructor(){}placeEntities(){}}var o=s(6297),i=s(1950);const a=[],r=JSON.parse('[{"id":"potion","items":[{"id":"potion_health","weight":30}]}]'),l=JSON.parse('[{"id":"lootable_containers","tiles":[{"id":"barrel","weight":100},{"id":"barrels","weight":75},{"id":"barrels_stacked","weight":50},{"id":"chest","weight":25}]}]'),c=JSON.parse('[{"level":1,"actors":[{"id":"rat_small","weight":50},{"id":"rat","weight":30},{"id":"lizard_giant","weight":20},{"id":"web","weight":50},{"id":"blood_large","weight":50}],"items":[{"group":"potion","weight":50}],"tiles":[{"group":"lootable_containers","weight":50}]}]'),d=JSON.parse('[{"level":1,"actors":[{"id":"web_large","weight":50},{"id":"web","weight":50},{"id":"blood_large","weight":50},{"id":"blood_medium","weight":50},{"id":"blood_small","weight":50},{"id":"rat","weight":500}],"items":[{"group":"potion","weight":50}],"tiles":[{"group":"lootable_containers","weight":50}]}]'),h=new class{constructor(){this.entityGroups=new Map,this.itemGroups=new Map,this.tileGroups=new Map,this.generators=new Map,this.loadEntityGroups(a),this.loadItemGroups(r),this.loadTileGroups(l),this.loadGenerator("basic-dungeon",c),this.loadGenerator("tutorial",d)}loadEntityGroups(e){for(const t of e)this.entityGroups.set(t.id,t.entities)}loadItemGroups(e){for(const t of e)this.itemGroups.set(t.id,t.items)}loadTileGroups(e){for(const t of e)this.tileGroups.set(t.id,t.tiles)}loadGenerator(e,t){this.generators.set(e,t)}getChancesForLevel(e,t){let s;const n=this.generators.get(e);for(const e of n){if(e.level>t)break;s=e}return s}getActorForLevel(e,t){const s=this.getChancesForLevel(e,t).actors;let n=this.getRandomFromGroup(s);for(;void 0!==n.group;){const e=this.entityGroups.get(n.group);n=this.getRandomFromGroup(e)}return n.id}getItemForLevel(e,t){const s=this.getChancesForLevel(e,t).items;let n=this.getRandomFromGroup(s);for(;void 0!==n.group;){const e=this.itemGroups.get(n.group);n=this.getRandomFromGroup(e)}return n.id}getTileForLevel(e,t){const s=this.getChancesForLevel(e,t).tiles;let n=this.getRandomFromGroup(s);for(;void 0!==n.group;){const e=this.tileGroups.get(n.group);n=this.getRandomFromGroup(e)}return n.id}getRandomFromGroup(e){let t,s=0;for(const t of e)s+=t.weight;let n=0;const i=o.Z.randomNumber(0,s);for(const s of e)if(n+=s.weight,i<n){t=s;break}return t}};class p extends n{constructor(e,t,s,n){super(),this.x1=e,this.y1=t,this.x2=e+s,this.y2=t+n,this.width=s,this.height=n}getCenterX(){return Math.round((this.x1+this.x2)/2)}getCenterY(){return Math.round((this.y1+this.y2)/2)}intersects(e){return this.x1<=e.x2&&this.x2>=e.x1&&this.y1<=e.y2&&this.y2>=e.y1}createRoom(e){const t=Math.max(0,this.x1),s=Math.min(e.width,this.x2+1),n=Math.max(0,this.y1),o=Math.min(e.height,this.y2+1),a=i.Z.createFromTemplate("floor",{components:{position:{x:0,y:0}}}),r=i.Z.createFromTemplate("floor_center",{components:{position:{x:0,y:0}}}),l=i.Z.createFromTemplate("floor_cracked",{components:{position:{x:0,y:0}}}),c=i.Z.createFromTemplate("wall",{components:{position:{x:0,y:0}}});for(let i=t;i<s;i++)for(let t=n;t<o;t++){let s;const n=Math.random();s=n<.06?l.clone():n<.1?r.clone():a.clone(),s.getComponent("position").moveTo(i,t),e.tiles[i][t]=s;const o=(i===this.x1||i===this.x2)&&t>=this.y1&&t<=this.y2,d=(t===this.y1||t===this.y2)&&i>=this.x1&&i<=this.x2,h=e.tiles[i][t];if((d||o)&&!h){const s=c.clone();s.getComponent("position").moveTo(i,t),e.tiles[i][t]=s}}}placeTiles(e,t,s,n,a){const r=o.Z.randomInt(n,a);for(let n=0;n<r;n++){const n=o.Z.randomInt(this.x1+1,this.x2-1),a=o.Z.randomInt(this.y1+1,this.y2-1);if(!e.getBlockingActorAtLocation(n,a)){const o={components:{position:{x:n,y:a}}},r=h.getTileForLevel(t,s);e.tiles[n][a]=i.Z.createFromTemplate(r,o)}}}placeEntities(e,t,s,n,a){const r=o.Z.randomInt(n,a);for(let n=0;n<r;n++){const n=o.Z.randomInt(this.x1+1,this.x2-1),a=o.Z.randomInt(this.y1+1,this.y2-1);if(!e.getBlockingActorAtLocation(n,a)){const o={components:{position:{x:n,y:a}}},r=h.getActorForLevel(t,s),l=i.Z.createFromTemplate(r,o);e.addActor(l)}}}placeItems(e,t,s,n){const a=o.Z.randomInt(0,n);for(let n=0;n<a;n++){const n={components:{position:{x:o.Z.randomInt(this.x1+1,this.x2-1),y:o.Z.randomInt(this.y1+1,this.y2-1)}}},a=h.getItemForLevel(t,s),r=i.Z.createFromTemplate(a,n);e.items.push(r)}}}},3432:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});class n{constructor(e,t,s){this.text=e,this.color=t||"#333",this.bold=!1,this.italics=!1,s&&(this.bold=s.bold||!1,this.italics=s.italics||!1)}isEqual(e){return this.text===e.text&&this.color===e.color&&this.bold===e.bold&&this.italics===e.italics}}class o{constructor(e=[]){this.subMessages=e,this.count=1}isEqual(e){if(this.subMessages.length!==e.length)return!1;for(let t=0;t<this.subMessages.length;t++){const s=this.subMessages[t],n=e[t];if(!s.isEqual(n))return!1}return!0}getHtml(){const e=document.createElement("div");e.classList.add("message");for(const t of this.subMessages){const s=document.createElement("span");s.classList.add("message__text"),t.bold&&s.classList.add("message__bold"),t.italics&&s.classList.add("message__italics"),s.innerText=t.text,s.style.color=t.color,e.appendChild(s)}return this.count>1&&e.appendChild(this.getCountHtml()),e}getCountHtml(){const e=document.createElement("span");return e.classList.add("message__amount"),e.innerText="x"+this.count,e}}var i=s(842);const a=new class{constructor(){this.messages=[],this.builder=[]}text(e,t,s){return this.builder.push(new n(e,t,s)),this}build(e=!0){this.addMessage(this.builder.slice(0),e),this.builder=[]}clear(){this.messages=[],i.Z.clear()}addMessage(e,t=!0){if(t&&this.messages.length>0){const t=this.messages[this.messages.length-1];t.isEqual(e)?(t.count+=1,i.Z.updateLastMessageCount(t)):this.addNewMessage(e)}else this.addNewMessage(e)}addNewMessage(e){const t=new o(e);this.messages.push(t),i.Z.addMessage(t.getHtml())}}},7156:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(1599);class o extends n.Z{constructor(){super('<div class="ui details"></div>')}updatePlayerDetails(){}getPosition(e){const t=e.getComponent("position");return"<span class='details__line'>Looking at: X:"+t.x.get()+" - Y:"+t.y.get()+"</span>"}updatePositionOnly(e){this.dom.innerHTML=this.getPosition(e)}updatePositionDetails(){}}const i=new o},959:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(1599);class o extends n.Z{constructor(){super('<div class="ui hero-info">\n    <div class="hero-status">\n        <div class="hero-status__message"></div>\n    </div>\n    <div class="hero-health">\n        <div class="hero-health__fg"></div>\n        <div class="hero-health__text"></div>\n    </div>\n    <div class="hero-stats">\n        <div class="hero-stat">Power: <span class="hero-power"></span></div>\n        <div class="hero-stat">Defense: <span class="hero-defense"></span></div>\n    </div>\n    <div class="hero-inventory"></div>\n</div>'),this.statusMessageDom=this.dom.getElementsByClassName("hero-status__message")[0],this.healthFgDom=this.dom.getElementsByClassName("hero-health__fg")[0],this.healthTextDom=this.dom.getElementsByClassName("hero-health__text")[0],this.powerDom=this.dom.getElementsByClassName("hero-power")[0],this.defenseDom=this.dom.getElementsByClassName("hero-defense")[0],this.inventoryDom=this.dom.getElementsByClassName("hero-inventory")[0]}updateStatus(e){this.statusMessageDom.innerText=e}updateHealth(e,t){const s=e/t*100;this.healthFgDom.style.width=s+"%",this.healthTextDom.innerText="HP: "+e+" / "+t}updatePower(e){this.powerDom.innerText=e}updateDefense(e){this.defenseDom.innerText=e}updateInventory(){}}const i=new o},1763:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s(1599),o=s(8680);class i extends n.Z{constructor(){super('<div class="ui inventory">\n    <div class="inventory__equipment">\n\n    </div>\n    <div class="inventory__storage-wrap">\n\n    </div>\n    <div class="inventory__golddisplay">\n        <span class="inventory__gold-count"></span>\n        <span class="inventory__gold-text"> Gold</span>\n    </div>\n</div>'),this.equipmentDom=this.dom.getElementsByClassName("inventory__equipment")[0],this.equipmentSlots=[];for(let e=0;e<12;e++){const t=document.createElement("div");t.classList.add("slot","inventory__equipment-slot"),t.setAttribute("data-index",e),this.equipmentSlots.push(t),this.equipmentDom.appendChild(t)}this.storageWrapDom=this.dom.getElementsByClassName("inventory__storage-wrap")[0],this.goldCountDom=this.dom.getElementsByClassName("inventory__gold-count")[0],this.itemTooltipDom=document.createElement("div"),this.itemTooltipDom.classList.add("item__tooltip"),this.itemDragDom=document.createElement("div"),this.itemDragDom.classList.add("item__drag"),document.body.appendChild(this.itemTooltipDom),document.body.appendChild(this.itemDragDom),this.openStorages=[],this.itemsOnGround=[]}populateInventory(e){const t=e.getComponent("equipment");if(t){this.storageWrapDom.innerHTML="";for(let e=0;e<this.equipmentSlots.length;e++){const s=this.equipmentSlots[e],n=t.items[e].item;this.populateSlot(s,n)}this.openStorages=[];const e=t.items[9].item;e&&this.openEquipmentStorage(e);const s=t.items[7].item;s&&this.openEquipmentStorage(s);for(let e=0;e<this.equipmentSlots.length;e++){if(7===e||9===e)continue;const s=t.items[e].item;s&&this.openEquipmentStorage(s)}}this.openGroundItems();const s=e.getComponent("inventory");s&&(this.goldCountDom.innerText=s.gold)}openEquipmentStorage(e){this.openStorages.push(e);const t=e.getComponent("equippable");if(t&&0!==t.maxStorage){let s;s=-1===t.maxStorage?t.storage.length+1:t.maxStorage;const n=document.createElement("div");n.classList.add("inventory__storage"),n.setAttribute("data-index",this.openStorages.length-1);const o=document.createElement("div");o.classList.add("inventory__storage-title"),o.innerText=e.name,n.appendChild(o),this.inventorySlots=[];for(let e=0;e<s;e++){const s=document.createElement("div");s.classList.add("slot","inventory__storage-slot"),s.setAttribute("data-index",e),this.populateSlot(s,t.storage[e]),this.inventorySlots.push(s),n.appendChild(s)}this.storageWrapDom.appendChild(n)}}populateItemsAtGround(){const e=o.Z.player.getComponent("position");this.itemsOnGround=[];for(const t of o.Z.gameMap.items){const s=t.getComponent("position");e.isEqual(s)&&this.itemsOnGround.push(t)}}openGroundItems(){if(this.isOpen()){this.populateItemsAtGround();const e=10*Math.ceil((this.itemsOnGround.length+1)/10),t=document.createElement("div");t.classList.add("inventory__storage");const s=document.createElement("div");s.classList.add("inventory__storage-title"),s.innerText="On Ground",t.appendChild(s),this.inventorySlots=[];for(let s=0;s<e;s++){const e=document.createElement("div");e.classList.add("slot","pickup-slot"),e.setAttribute("data-index",s),this.populateSlot(e,this.itemsOnGround[s]),this.inventorySlots.push(e),t.appendChild(e)}this.storageWrapDom.appendChild(t)}}populateSlot(e,t){if(t){const s=t.getComponent("position");if(s){let n="";0!==s.zRot&&(n="transform: rotate("+180*s.zRot+"deg);"),e.classList.add("has-item");let o="<div class='item' style='color:"+t.color.get()+";"+n+"'><div class='item__icon'>"+t.letter.get()+"</div>";t.amount>1&&(o+="<span class='item__amount'>"+t.amount.get()+"</span>"),o+="<div class='item__details'><span class='item__details-line item__name'>"+t.name.get()+"</span>",t.description&&(o+="<span class='item__details-line item__description'>"+t.description.get()+"</span>"),o+="<span class='item__details-line'><hr/></span>",o+=t.getComponentDescriptions(),o+="</div></div>",e.innerHTML=o}}else e.classList.remove("has-item"),e.innerHTML=""}toggle(){this.isOpen()?this.close():(this.open(),this.populateInventory(o.Z.player))}}const a=new i},842:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(1599);class o extends n.Z{constructor(){super('<div class="ui message-console">\n    <div class="messages__wrap">\n        <div class="messages">\n            <div class="messages__inn"></div>\n        </div>\n    </div>\n</div>'),this.messagesInnerDom=this.dom.getElementsByClassName("messages__inn")[0]}updateLastMessageCount(e){const t=document.querySelectorAll(".message:last-child")[0],s=t.querySelectorAll(".message__amount")[0];s?s.innerText="x"+e.count:t.appendChild(e.getCountHtml())}addMessage(e){this.messagesInnerDom.appendChild(e)}clear(){this.messagesInnerDom.innerHTML=""}}const i=new o},8953:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(1599);class o extends n.Z{constructor(){super('<div class="ui player-info">\n    <div class="player-health">\n        <div class="player-health__fg"></div>\n        <div class="player-health__text"></div>\n    </div>\n    <div class="player-stats">\n        <div class="player-stat">Power: <span class="player-power"></span></div>\n        <div class="player-stat">Defense: <span class="player-defense"></span></div>\n    </div>\n</div>'),this.healthFgDom=this.dom.getElementsByClassName("player-health__fg")[0],this.healthTextDom=this.dom.getElementsByClassName("player-health__text")[0],this.powerDom=this.dom.getElementsByClassName("player-power")[0],this.defenseDom=this.dom.getElementsByClassName("player-defense")[0]}updateHealth(e,t){const s=e/t*100;this.healthFgDom.style.width=s+"%",this.healthTextDom.innerText="HP: "+e+" / "+t}updatePower(e){this.powerDom.innerText=e}updateDefense(e){this.defenseDom.innerText=e}}const i=new o},7839:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(1599);class o extends n.Z{constructor(){super('<div class="ui select-list">\n    <h1 class="select-list__title"></h1>\n    <ol class="select-list__options"></ol>\n</div>'),this.titleDom=this.dom.getElementsByClassName("select-list__title")[0],this.optionsDom=this.dom.getElementsByClassName("select-list__options")[0]}setTitle(e){this.titleDom.innerText=e}setOptions(e){this.optionsDom.innerHTML="";let t=0;for(const s of e){const e=document.createElement("li");e.classList.add("select-list__option"),e.dataset.index=t.toString(),0===t&&e.classList.add("active"),e.innerText=s,this.optionsDom.appendChild(e),t++}}moveActiveUp(){const e=this.optionsDom.getElementsByClassName("active")[0],t=e.previousElementSibling;if(t)t!==e&&(t.classList.add("active"),e.classList.remove("active"));else{const t=this.optionsDom.lastElementChild;t!==e&&(t.classList.add("active"),e.classList.remove("active"))}}moveActiveDown(){const e=this.optionsDom.getElementsByClassName("active")[0],t=e.nextElementSibling;if(t)t!==e&&(t.classList.add("active"),e.classList.remove("active"));else{const t=this.optionsDom.firstElementChild;t!==e&&(t.classList.add("active"),e.classList.remove("active"))}}getActiveIndex(){const e=this.optionsDom.getElementsByClassName("active")[0];return parseInt(e.dataset.index)}open(e,t){this.dom.style.left=e+"px",this.dom.style.top=t+"px",super.open()}}const i=new o},7493:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(1599);class o extends n.Z{constructor(){super('<div class="ui trade-list">\n    <h1 class="trade-list__title"></h1>\n    <div class="trade-list__wrap">\n        <div class="trade-list__left">\n            <ol class="trade-list__left-options"></ol>\n        </div>\n        <div class="trade-list__right">\n            <ol class="trade-list__right-options"></ol>\n        </div>\n    </div>\n</div>'),this.titleDom=this.dom.getElementsByClassName("trade-list__title")[0],this.leftOptionsDom=this.dom.getElementsByClassName("trade-list__left-options")[0],this.rightOptionsDom=this.dom.getElementsByClassName("trade-list__right-options")[0]}setTitle(e){this.titleDom.innerText=e}setOptions(e,t){this.leftOptionsDom.innerHTML="";let s=0;for(const t of e){const e=document.createElement("li");e.classList.add("trade-list__option"),e.dataset.index=s.toString(),0===s&&e.classList.add("active"),e.innerText=t?t.name:"<empty>",this.leftOptionsDom.appendChild(e),s++}this.rightOptionsDom.innerHTML="",s=0;for(const e of t){const t=document.createElement("li");t.classList.add("trade-list__option"),t.dataset.index=s.toString(),t.innerText=e?e.name:"<empty>",this.rightOptionsDom.appendChild(t),s++}}moveActiveUp(){let e=this.leftOptionsDom.getElementsByClassName("active")[0];if(e){const t=e.previousElementSibling;if(t)t!==e&&(t.classList.add("active"),e.classList.remove("active"));else{const t=this.leftOptionsDom.lastElementChild;t!==e&&(t.classList.add("active"),e.classList.remove("active"))}}else if(e=this.rightOptionsDom.getElementsByClassName("active")[0],e){const t=e.previousElementSibling;if(t)t!==e&&(t.classList.add("active"),e.classList.remove("active"));else{const t=this.rightOptionsDom.lastElementChild;t!==e&&(t.classList.add("active"),e.classList.remove("active"))}}}moveActiveDown(){let e=this.leftOptionsDom.getElementsByClassName("active")[0];if(e){const t=e.nextElementSibling;if(t)t!==e&&(t.classList.add("active"),e.classList.remove("active"));else{const t=this.leftOptionsDom.firstElementChild;t!==e&&(t.classList.add("active"),e.classList.remove("active"))}}else if(e=this.rightOptionsDom.getElementsByClassName("active")[0],e){const t=e.nextElementSibling;if(t)t!==e&&(t.classList.add("active"),e.classList.remove("active"));else{const t=this.rightOptionsDom.firstElementChild;t!==e&&(t.classList.add("active"),e.classList.remove("active"))}}}moveActiveLeftRight(){let e=this.leftOptionsDom.getElementsByClassName("active")[0];e?(this.rightOptionsDom.firstElementChild.classList.add("active"),e.classList.remove("active")):(e=this.rightOptionsDom.getElementsByClassName("active")[0],this.leftOptionsDom.firstElementChild.classList.add("active"),e.classList.remove("active"))}getLeftActiveIndex(){let e=-1;const t=this.leftOptionsDom.getElementsByClassName("active")[0];return t&&(e=parseInt(t.dataset.index)),e}getRightActiveIndex(){let e=-1;const t=this.rightOptionsDom.getElementsByClassName("active")[0];return t&&(e=parseInt(t.dataset.index)),e}open(e,t){this.dom.style.left=e+"px",this.dom.style.top=t+"px",super.open()}}const i=new o},1175:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s(1599);class o extends n.Z{constructor(){super('<div class="ui view-info">\n\n</div>')}updatePlayerDetails(e,t){const s=e.getComponent("position"),n=t.tiles[s.x.get()][s.y.get()];this.updatePositionDetails(n)}getDetailsLine(e){return"<span class='details__line'>"+e+"</span>"}updatePositionDetails(e){let t;t=e.getComponent("fov")?.isExplored()?this.getDetailsLine(e.name):this.getDetailsLine("You haven't explored here."),this.dom.innerHTML=t}}const i=new o},2798:(e,t,s)=>{var n={"./actors/_base.json":7164,"./actors/enemies.json":3266,"./actors/hero.json":491,"./actors/player.json":4145,"./items/_base.json":6975,"./items/potions.json":3353,"./tiles/_base.json":5860,"./tiles/containers.json":6362,"./tiles/floors.json":2727,"./tiles/shop.json":819,"./tiles/stairs.json":2077,"./tiles/walls.json":2329};function o(e){return i(e).then(s)}function i(e){return Promise.resolve().then((()=>{if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}))}o.keys=()=>Object.keys(n),o.resolve=i,o.id=2798,e.exports=o},7164:e=>{"use strict";e.exports=JSON.parse('[{"id":"base_actor","type":"actor","sprite":"placeholder","components":{"blocksMovement":true,"fighter":{}}},{"id":"base_interactable","type":"actor","sprite":"placeholder","components":{"blocksMovement":false}}]')},3266:e=>{"use strict";e.exports=JSON.parse('[{"id":"rat","extends":"base_actor","name":"Rat","sprite":"rltiles_giant_rat","components":{"faction":{"factions":"monsters","enemies":"hero"},"aiMeleeChase":{"radius":3,"movementActions":2},"fighter":{"baseHp":10,"baseDamage":2},"level":{"xpGiven":10}}},{"id":"rat_small","extends":"base_actor","name":"Small Rat","sprite":"rltiles_sewer_rat","components":{"faction":{"factions":"monsters","enemies":"hero"},"aiMeleeChase":{"radius":3,"movementActions":2},"fighter":{"baseHp":5,"baseDamage":1},"level":{"xpGiven":5}}},{"id":"lizard_giant","extends":"base_actor","name":"Giant Lizard","sprite":"rltiles_giant_lizard","components":{"faction":{"factions":"monsters","enemies":"hero"},"aiMeleeChase":{"radius":3,"movementActions":2},"fighter":{"baseHp":15,"baseDamage":3},"level":{"xpGiven":15}}},{"id":"web_large","extends":"base_interactable","name":"Web","sprite":"webs_cobweb_large","components":{"cleanable":{"decreasesTo":"web"}}},{"id":"web","extends":"base_interactable","name":"Web","sprite":"webs_cobweb","components":{"cleanable":{"increasesTo":"web_large"}}},{"id":"blood_large","extends":"base_interactable","name":"Pool of Blood","sprite":"scribble_blood_3","components":{"cleanable":{"decreasesTo":"blood_medium"}}},{"id":"blood_medium","extends":"base_interactable","name":"Pool of Blood","sprite":"scribble_blood_2","components":{"cleanable":{"decreasesTo":"blood_small","increasesTo":"blood_large"}}},{"id":"blood_small","extends":"base_interactable","name":"Pool of Blood","sprite":"scribble_blood_1","components":{"cleanable":{"increasesTo":"blood_medium"}}}]')},491:e=>{"use strict";e.exports=JSON.parse('[{"id":"hero","extends":"base_actor","name":"Hero","color":"#00f","letter":"@","sprite":"rltiles_barbarian","components":{"faction":{"factions":"hero","enemies":"monsters, player"},"fighter":{"baseHp":30,"baseDefense":2,"baseDamage":5},"aiHero":{}}}]')},4145:e=>{"use strict";e.exports=JSON.parse('[{"id":"player","extends":"base_actor","name":"Player","color":"#00f","letter":"@","sprite":"rltiles_human","components":{"faction":{"factions":"player","enemies":"hero"},"fighter":{"baseHp":30,"baseDefense":2,"baseDamage":5},"inventory":{"items":[{"load":"potion_health"}]}}}]')},6975:e=>{"use strict";e.exports=JSON.parse('[{"id":"base_item","type":"item","sprite":"placeholder","components":{}}]')},3353:e=>{"use strict";e.exports=JSON.parse('[{"id":"potion","extends":"base_item","maxStackSize":20,"components":{}},{"id":"potion_health","extends":"potion","sprite":"rltiles_purple_red","name":"Health Potion","description":"Recover a minor amount of health","components":{"healingConsumable":{"amount":4}}}]')},5860:e=>{"use strict";e.exports=JSON.parse('[{"id":"base_tile","type":"tile","sprite":"placeholder","components":{"blocksMovement":true,"blocksFov":true}}]')},6362:e=>{"use strict";e.exports=JSON.parse('[{"id":"base_container","extends":"base_tile","components":{"blocksMovement":true,"blocksFov":false}},{"id":"barrel","extends":"base_container","name":"Barrel","color":"#ddd","sprite":"scribble_floor_barrel","components":{"lootableInteractable":{"capacity":1}}},{"id":"barrels","extends":"base_container","name":"Barrels","color":"#ddd","sprite":"scribble_floor_barrels","components":{"lootableInteractable":{"capacity":2}}},{"id":"barrels_stacked","extends":"base_container","name":"Barrels","color":"#ddd","sprite":"scribble_floor_barrels_stacked","components":{"lootableInteractable":{"capacity":3}}},{"id":"chest","extends":"base_container","name":"Chest","color":"#ddd","sprite":"scribble_floor_chest","components":{"lootableInteractable":{"capacity":5}}}]')},2727:e=>{"use strict";e.exports=JSON.parse('[{"id":"base_floor","extends":"base_tile","components":{"blocksMovement":false,"blocksFov":false}},{"id":"floor","extends":"base_floor","name":"Floor","color":"#ddd","sprite":"scribble_tiles"},{"id":"floor_center","extends":"base_floor","name":"Floor","color":"#ddd","sprite":"scribble_tiles_center"},{"id":"floor_cracked","extends":"base_floor","name":"Floor","color":"#ddd","sprite":"scribble_tiles_cracked"}]')},819:e=>{"use strict";e.exports=JSON.parse('[{"id":"table","extends":"base_tile","name":"Table","color":"#ddd","sprite":"scribble_floor_table","components":{"blocksMovement":true,"blocksFov":false}}]')},2077:e=>{"use strict";e.exports=JSON.parse('[{"id":"stairs_up","extends":"base_tile","sprite":"scribble_stairs_down_detail","name":"Stairs Up","components":{"blocksMovement":true,"blocksFov":false}},{"id":"stairs_down","extends":"base_tile","sprite":"scribble_stairs_down","name":"Stairs Down","components":{"blocksMovement":false,"blocksFov":false}},{"id":"trap_door","extends":"base_tile","sprite":"scribble_trap_door","name":"Trap Door","components":{"blocksMovement":false,"blocksFov":false}}]')},2329:e=>{"use strict";e.exports=JSON.parse('[{"id":"base_wall","extends":"base_tile","components":{"blocksMovement":true,"blocksFov":true}},{"id":"wall","extends":"base_wall","name":"Wall","color":"#666","sprite":"scribble_wall_full"}]')}},e=>{e(e.s=1814)}]);
//# sourceMappingURL=app.9c1628ccdaf28ff12c2d.js.map